{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://space-invaders-revisited/./src/index.css","webpack://space-invaders-revisited/./node_modules/css-loader/dist/runtime/api.js","webpack://space-invaders-revisited/./node_modules/css-loader/dist/runtime/getUrl.js","webpack://space-invaders-revisited/./node_modules/css-loader/dist/runtime/sourceMaps.js","webpack://space-invaders-revisited/./src/index.css?cfe4","webpack://space-invaders-revisited/./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack://space-invaders-revisited/./node_modules/style-loader/dist/runtime/insertBySelector.js","webpack://space-invaders-revisited/./node_modules/style-loader/dist/runtime/insertStyleElement.js","webpack://space-invaders-revisited/./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js","webpack://space-invaders-revisited/./node_modules/style-loader/dist/runtime/styleDomAPI.js","webpack://space-invaders-revisited/./node_modules/style-loader/dist/runtime/styleTagTransform.js","webpack://space-invaders-revisited/./src/domain/components/aliens/alien-img-component.ts","webpack://space-invaders-revisited/./src/domain/components/aliens/alien-one-img-component.ts","webpack://space-invaders-revisited/./src/domain/components/aliens/alien-plunger-shot-component.ts","webpack://space-invaders-revisited/./src/domain/components/aliens/alien-rocket-component.ts","webpack://space-invaders-revisited/./src/domain/components/aliens/alien-saucer-img-component.ts","webpack://space-invaders-revisited/./src/domain/components/aliens/alien-squigly-shot-component.ts","webpack://space-invaders-revisited/./src/domain/components/aliens/alien-three-img-component.ts","webpack://space-invaders-revisited/./src/domain/components/aliens/alien-two-img-component.ts","webpack://space-invaders-revisited/./src/domain/components/canvas-component.ts","webpack://space-invaders-revisited/./src/domain/components/ceiling-line-component.ts","webpack://space-invaders-revisited/./src/domain/components/extent-component.ts","webpack://space-invaders-revisited/./src/domain/components/finish-line-component.ts","webpack://space-invaders-revisited/./src/domain/components/image-component.ts","webpack://space-invaders-revisited/./src/domain/components/player/player-component.ts","webpack://space-invaders-revisited/./src/domain/components/player/player-rocket-component.ts","webpack://space-invaders-revisited/./src/domain/components/position-component.ts","webpack://space-invaders-revisited/./src/domain/components/shield-component.ts","webpack://space-invaders-revisited/./src/domain/entities.ts","webpack://space-invaders-revisited/./src/domain/entities/alien-entities.ts","webpack://space-invaders-revisited/./src/domain/entities/alien-rockets-entities.ts","webpack://space-invaders-revisited/./src/domain/entities/alien-saucer-entity.ts","webpack://space-invaders-revisited/./src/domain/entities/canvas-entity.ts","webpack://space-invaders-revisited/./src/domain/entities/ceiling-line.entity.ts","webpack://space-invaders-revisited/./src/domain/entities/entity-impl.ts","webpack://space-invaders-revisited/./src/domain/entities/finish-line-entity.ts","webpack://space-invaders-revisited/./src/domain/entities/player-entity.ts","webpack://space-invaders-revisited/./src/domain/entities/player-rocket-entities.ts","webpack://space-invaders-revisited/./src/domain/entities/shield-entities.ts","webpack://space-invaders-revisited/./src/domain/pages/base-page.ts","webpack://space-invaders-revisited/./src/domain/pages/end.ts","webpack://space-invaders-revisited/./src/domain/pages/intro.ts","webpack://space-invaders-revisited/./src/domain/pages/respawn.ts","webpack://space-invaders-revisited/./src/domain/systems.ts","webpack://space-invaders-revisited/./src/domain/systems/alien-rocket-system.ts","webpack://space-invaders-revisited/./src/domain/systems/canvas-system.ts","webpack://space-invaders-revisited/./src/domain/systems/collision-system.ts","webpack://space-invaders-revisited/./src/domain/systems/game-logic-system.ts","webpack://space-invaders-revisited/./src/domain/systems/motion-system.ts","webpack://space-invaders-revisited/./src/domain/systems/render-system.ts","webpack://space-invaders-revisited/./src/domain/systems/user-input-system.ts","webpack://space-invaders-revisited/./src/game-settings.ts","webpack://space-invaders-revisited/./src/game-state.ts","webpack://space-invaders-revisited/./src/game.ts","webpack://space-invaders-revisited/./node_modules/tslib/tslib.es6.mjs","webpack://space-invaders-revisited/webpack/bootstrap","webpack://space-invaders-revisited/webpack/runtime/compat get default export","webpack://space-invaders-revisited/webpack/runtime/define property getters","webpack://space-invaders-revisited/webpack/runtime/hasOwnProperty shorthand","webpack://space-invaders-revisited/webpack/runtime/make namespace object","webpack://space-invaders-revisited/webpack/runtime/publicPath","webpack://space-invaders-revisited/webpack/runtime/jsonp chunk loading","webpack://space-invaders-revisited/webpack/runtime/nonce","webpack://space-invaders-revisited/./src/index.ts"],"sourcesContent":["// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../node_modules/css-loader/dist/runtime/api.js\";\nimport ___CSS_LOADER_GET_URL_IMPORT___ from \"../node_modules/css-loader/dist/runtime/getUrl.js\";\nvar ___CSS_LOADER_URL_IMPORT_0___ = new URL(\"./PressStart2P-vaV7.ttf\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_1___ = new URL(\"./assets/earth-view-from-space.jpg\", import.meta.url);\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\nvar ___CSS_LOADER_URL_REPLACEMENT_0___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_0___);\nvar ___CSS_LOADER_URL_REPLACEMENT_1___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_1___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `@font-face {\n    font-family: 'SpaceInvaders';\n    src: url(${___CSS_LOADER_URL_REPLACEMENT_0___});\n}\n\nhtml, body {\n    margin: 0;\n    padding: 0;\n    background-image: url(${___CSS_LOADER_URL_REPLACEMENT_1___});\n    background-position: center;\n    background-size: cover;\n    height: 100%;\n    width: 100%;\n}\n\ncanvas {\n    padding: 0;\n    margin: auto;\n    display: block;\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n}\n\ndiv {\n    height: 100%;\n    width: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n}\n\n#container {\n    position: relative;\n}\n#container canvas, #hi-score {\n    position: absolute;\n}\n\n#hi-score {\n    background-color: rgba(0, 0, 0, 0.5);\n}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/index.css\"],\"names\":[],\"mappings\":\"AAAA;IACI,4BAA4B;IAC5B,4CAAmC;AACvC;;AAEA;IACI,SAAS;IACT,UAAU;IACV,yDAA2D;IAC3D,2BAA2B;IAC3B,sBAAsB;IACtB,YAAY;IACZ,WAAW;AACf;;AAEA;IACI,UAAU;IACV,YAAY;IACZ,cAAc;IACd,kBAAkB;IAClB,MAAM;IACN,SAAS;IACT,OAAO;IACP,QAAQ;AACZ;;AAEA;IACI,YAAY;IACZ,WAAW;IACX,aAAa;IACb,uBAAuB;IACvB,mBAAmB;AACvB;;AAEA;IACI,kBAAkB;AACtB;AACA;IACI,kBAAkB;AACtB;;AAEA;IACI,oCAAoC;AACxC\",\"sourcesContent\":[\"@font-face {\\n    font-family: 'SpaceInvaders';\\n    src: url('./PressStart2P-vaV7.ttf');\\n}\\n\\nhtml, body {\\n    margin: 0;\\n    padding: 0;\\n    background-image: url(\\\"./assets/earth-view-from-space.jpg\\\");\\n    background-position: center;\\n    background-size: cover;\\n    height: 100%;\\n    width: 100%;\\n}\\n\\ncanvas {\\n    padding: 0;\\n    margin: auto;\\n    display: block;\\n    position: absolute;\\n    top: 0;\\n    bottom: 0;\\n    left: 0;\\n    right: 0;\\n}\\n\\ndiv {\\n    height: 100%;\\n    width: 100%;\\n    display: flex;\\n    justify-content: center;\\n    align-items: center;\\n}\\n\\n#container {\\n    position: relative;\\n}\\n#container canvas, #hi-score {\\n    position: absolute;\\n}\\n\\n#hi-score {\\n    background-color: rgba(0, 0, 0, 0.5);\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\nmodule.exports = function (cssWithMappingToString) {\n  var list = [];\n\n  // return the list of modules as css string\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = \"\";\n      var needLayer = typeof item[5] !== \"undefined\";\n      if (item[4]) {\n        content += \"@supports (\".concat(item[4], \") {\");\n      }\n      if (item[2]) {\n        content += \"@media \".concat(item[2], \" {\");\n      }\n      if (needLayer) {\n        content += \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\");\n      }\n      content += cssWithMappingToString(item);\n      if (needLayer) {\n        content += \"}\";\n      }\n      if (item[2]) {\n        content += \"}\";\n      }\n      if (item[4]) {\n        content += \"}\";\n      }\n      return content;\n    }).join(\"\");\n  };\n\n  // import a list of modules into the list\n  list.i = function i(modules, media, dedupe, supports, layer) {\n    if (typeof modules === \"string\") {\n      modules = [[null, modules, undefined]];\n    }\n    var alreadyImportedModules = {};\n    if (dedupe) {\n      for (var k = 0; k < this.length; k++) {\n        var id = this[k][0];\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n    for (var _k = 0; _k < modules.length; _k++) {\n      var item = [].concat(modules[_k]);\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        continue;\n      }\n      if (typeof layer !== \"undefined\") {\n        if (typeof item[5] === \"undefined\") {\n          item[5] = layer;\n        } else {\n          item[1] = \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\").concat(item[1], \"}\");\n          item[5] = layer;\n        }\n      }\n      if (media) {\n        if (!item[2]) {\n          item[2] = media;\n        } else {\n          item[1] = \"@media \".concat(item[2], \" {\").concat(item[1], \"}\");\n          item[2] = media;\n        }\n      }\n      if (supports) {\n        if (!item[4]) {\n          item[4] = \"\".concat(supports);\n        } else {\n          item[1] = \"@supports (\".concat(item[4], \") {\").concat(item[1], \"}\");\n          item[4] = supports;\n        }\n      }\n      list.push(item);\n    }\n  };\n  return list;\n};","\"use strict\";\n\nmodule.exports = function (url, options) {\n  if (!options) {\n    options = {};\n  }\n  if (!url) {\n    return url;\n  }\n  url = String(url.__esModule ? url.default : url);\n\n  // If url is already wrapped in quotes, remove them\n  if (/^['\"].*['\"]$/.test(url)) {\n    url = url.slice(1, -1);\n  }\n  if (options.hash) {\n    url += options.hash;\n  }\n\n  // Should url be wrapped?\n  // See https://drafts.csswg.org/css-values-3/#urls\n  if (/[\"'() \\t\\n]|(%20)/.test(url) || options.needQuotes) {\n    return \"\\\"\".concat(url.replace(/\"/g, '\\\\\"').replace(/\\n/g, \"\\\\n\"), \"\\\"\");\n  }\n  return url;\n};","\"use strict\";\n\nmodule.exports = function (item) {\n  var content = item[1];\n  var cssMapping = item[3];\n  if (!cssMapping) {\n    return content;\n  }\n  if (typeof btoa === \"function\") {\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    return [content].concat([sourceMapping]).join(\"\\n\");\n  }\n  return [content].join(\"\\n\");\n};","\n      import API from \"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../node_modules/css-loader/dist/cjs.js!./index.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../node_modules/css-loader/dist/cjs.js!./index.css\";\n       export default content && content.locals ? content.locals : undefined;\n","\"use strict\";\n\nvar stylesInDOM = [];\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n  for (var i = 0; i < stylesInDOM.length; i++) {\n    if (stylesInDOM[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n  return result;\n}\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var indexByIdentifier = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3],\n      supports: item[4],\n      layer: item[5]\n    };\n    if (indexByIdentifier !== -1) {\n      stylesInDOM[indexByIdentifier].references++;\n      stylesInDOM[indexByIdentifier].updater(obj);\n    } else {\n      var updater = addElementStyle(obj, options);\n      options.byIndex = i;\n      stylesInDOM.splice(i, 0, {\n        identifier: identifier,\n        updater: updater,\n        references: 1\n      });\n    }\n    identifiers.push(identifier);\n  }\n  return identifiers;\n}\nfunction addElementStyle(obj, options) {\n  var api = options.domAPI(options);\n  api.update(obj);\n  var updater = function updater(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap && newObj.supports === obj.supports && newObj.layer === obj.layer) {\n        return;\n      }\n      api.update(obj = newObj);\n    } else {\n      api.remove();\n    }\n  };\n  return updater;\n}\nmodule.exports = function (list, options) {\n  options = options || {};\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDOM[index].references--;\n    }\n    var newLastIdentifiers = modulesToDom(newList, options);\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n      var _index = getIndexByIdentifier(_identifier);\n      if (stylesInDOM[_index].references === 0) {\n        stylesInDOM[_index].updater();\n        stylesInDOM.splice(_index, 1);\n      }\n    }\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","\"use strict\";\n\nvar memo = {};\n\n/* istanbul ignore next  */\nfunction getTarget(target) {\n  if (typeof memo[target] === \"undefined\") {\n    var styleTarget = document.querySelector(target);\n\n    // Special case to return head of iframe instead of iframe itself\n    if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n      try {\n        // This will throw an exception if access to iframe is blocked\n        // due to cross-origin restrictions\n        styleTarget = styleTarget.contentDocument.head;\n      } catch (e) {\n        // istanbul ignore next\n        styleTarget = null;\n      }\n    }\n    memo[target] = styleTarget;\n  }\n  return memo[target];\n}\n\n/* istanbul ignore next  */\nfunction insertBySelector(insert, style) {\n  var target = getTarget(insert);\n  if (!target) {\n    throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n  }\n  target.appendChild(style);\n}\nmodule.exports = insertBySelector;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction insertStyleElement(options) {\n  var element = document.createElement(\"style\");\n  options.setAttributes(element, options.attributes);\n  options.insert(element, options.options);\n  return element;\n}\nmodule.exports = insertStyleElement;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction setAttributesWithoutAttributes(styleElement) {\n  var nonce = typeof __webpack_nonce__ !== \"undefined\" ? __webpack_nonce__ : null;\n  if (nonce) {\n    styleElement.setAttribute(\"nonce\", nonce);\n  }\n}\nmodule.exports = setAttributesWithoutAttributes;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction apply(styleElement, options, obj) {\n  var css = \"\";\n  if (obj.supports) {\n    css += \"@supports (\".concat(obj.supports, \") {\");\n  }\n  if (obj.media) {\n    css += \"@media \".concat(obj.media, \" {\");\n  }\n  var needLayer = typeof obj.layer !== \"undefined\";\n  if (needLayer) {\n    css += \"@layer\".concat(obj.layer.length > 0 ? \" \".concat(obj.layer) : \"\", \" {\");\n  }\n  css += obj.css;\n  if (needLayer) {\n    css += \"}\";\n  }\n  if (obj.media) {\n    css += \"}\";\n  }\n  if (obj.supports) {\n    css += \"}\";\n  }\n  var sourceMap = obj.sourceMap;\n  if (sourceMap && typeof btoa !== \"undefined\") {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  }\n\n  // For old IE\n  /* istanbul ignore if  */\n  options.styleTagTransform(css, styleElement, options.options);\n}\nfunction removeStyleElement(styleElement) {\n  // istanbul ignore if\n  if (styleElement.parentNode === null) {\n    return false;\n  }\n  styleElement.parentNode.removeChild(styleElement);\n}\n\n/* istanbul ignore next  */\nfunction domAPI(options) {\n  if (typeof document === \"undefined\") {\n    return {\n      update: function update() {},\n      remove: function remove() {}\n    };\n  }\n  var styleElement = options.insertStyleElement(options);\n  return {\n    update: function update(obj) {\n      apply(styleElement, options, obj);\n    },\n    remove: function remove() {\n      removeStyleElement(styleElement);\n    }\n  };\n}\nmodule.exports = domAPI;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction styleTagTransform(css, styleElement) {\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css;\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild);\n    }\n    styleElement.appendChild(document.createTextNode(css));\n  }\n}\nmodule.exports = styleTagTransform;","import {ImageComponent} from \"../image-component\";\nimport AlienExploding from \"../../../assets/alien-exploding.png\";\n\nexport abstract class AlienImgComponent extends ImageComponent {\n\n    name: string = \"AlienImgComponent\";\n\n    visible: boolean = true;\n    points: number = 0;\n\n    moveRight = true;\n    moveLeft = false;\n    moveDown = false;\n    startTime = performance.now();\n\n    exploding = false;\n    explosionFrameCount = performance.now();\n\n    protected constructor(params: {sx: number, sy: number, sWidth: number, sHeight: number,\n                        dWidth: number, dHeight: number, img: HTMLImageElement}) {\n        super(params);\n    }\n\n    reset(): void {\n        this.visible = true;\n        this.moveRight = true;\n        this.moveLeft = false;\n        this.moveDown = false;\n        this.exploding = false;\n        this.startTime = performance.now();\n        this.setImageOne();\n    }\n\n    abstract setImageOne(): void;\n\n    abstract setImageTwo(): void;\n\n    setExplode() {\n        this.sx = 0;\n        this.sy = 0;\n        this.sWidth = 13;\n        this.sHeight = 8;\n        this.dWidth = 12;\n        this.dHeight = 8;\n        this.img.src = AlienExploding;\n    }\n}\n","import AlienOneImage from \"../../../assets/alien-one.png\"\nimport {AlienImgComponent} from \"./alien-img-component\";\n\nexport class AlienOneImgComponent extends AlienImgComponent {\n\n    points: number = 30;\n\n    constructor() {\n        const img = new Image();\n        img.src = AlienOneImage;\n        super({sx: 0, sy: 0, sWidth: 24, sHeight: 16, dWidth: 12, dHeight: 8, img: img});\n    }\n\n    setImageOne() {\n        this.sx = 0;\n        this.sy = 0;\n        this.img.src = AlienOneImage;\n        this.resetImg();\n    }\n\n    setImageTwo() {\n        this.sx = 24;\n        this.sy = 0;\n        this.img.src = AlienOneImage;\n        this.resetImg();\n    }\n\n    private resetImg() {\n        this.sWidth = 24;\n        this.sHeight = 16;\n        this.dWidth = 12;\n        this.dHeight = 8;\n    }\n}\n","import AlienPlungerShot from \"../../../assets/alien-plunger-shot.png\";\nimport {AlienRocketComponent} from \"./alien-rocket-component\";\n\nexport class AlienPlungerShotComponent extends AlienRocketComponent {\n\n    constructor() {\n        const img = new Image();\n        img.src = AlienPlungerShot;\n        super({sx: 0, sy: 0, sWidth: 3, sHeight: 7, dWidth: 3, dHeight: 7, img});\n    }\n\n    setImageOne() {\n        this.sx = 0;\n        this.sy = 0;\n        this.img.src = AlienPlungerShot;\n        this.resetImg();\n    }\n\n    setImageTwo() {\n        this.sx = 3;\n        this.sy = 0;\n        this.img.src = AlienPlungerShot;\n        this.resetImg();\n    }\n\n    setImageThree() {\n        this.sx = 6;\n        this.sy = 0;\n        this.img.src = AlienPlungerShot;\n        this.resetImg();\n    }\n\n    setImageFour() {\n        this.sx = 9;\n        this.sy = 0;\n        this.img.src = AlienPlungerShot;\n        this.resetImg();\n    }\n\n    private resetImg() {\n        this.sWidth = 3;\n        this.sHeight = 7;\n        this.dWidth = 3;\n        this.dHeight = 7;\n    }\n}\n","import {ImageComponent} from \"../image-component\";\nimport AlienRocketExploding from \"../../../assets/alien-shot-exploding.png\";\n\nexport abstract class AlienRocketComponent extends ImageComponent {\n\n    name: string = 'AlienRocketComponent';\n\n    visible: boolean = false;\n    triggerTime = performance.now();\n\n    exploding = false;\n    explosionFrameCount = performance.now();\n\n    protected constructor(params: {sx: number, sy: number, sWidth: number, sHeight: number,\n                        dWidth: number, dHeight: number, img: HTMLImageElement}) {\n        super(params);\n    }\n\n    reset(): void {\n        this.visible = false;\n        this.exploding = false;\n        this.triggerTime = performance.now();\n        this.setImageOne(); // dubious\n    }\n\n    abstract setImageOne(): void;\n\n    abstract setImageTwo(): void;\n\n    abstract setImageThree(): void;\n\n    abstract setImageFour(): void;\n\n    setExplode() {\n        this.sx = 0;\n        this.sy = 0;\n        this.sWidth = 6;\n        this.sHeight = 8;\n        this.dWidth = 6;\n        this.dHeight = 8;\n        this.img.src = AlienRocketExploding;\n    }\n\n}\n","import AlienSaucerImage from \"../../../assets/flying-saucer.png\";\nimport {ImageComponent} from \"../image-component\";\n\nexport class AlienSaucerImgComponent extends ImageComponent {\n\n    name: string = \"AlienSaucerImgComponent\";\n\n    points: number = Math.floor(Math.random() * 300);\n    visible: boolean = false;\n\n    moveRight: boolean;\n    startTime = performance.now();\n\n    exploding = false;\n    explosionFrameCount = performance.now();\n\n    constructor() {\n        const img = new Image();\n        img.src = AlienSaucerImage;\n        super({sx: 0, sy: 0, sWidth: 16, sHeight: 8, dWidth: 12, dHeight: 6, img: img});\n        this.moveRight = this.setMoveDirection();\n    }\n\n    setMoveDirection(): boolean {\n        this.moveRight = Math.random() < 0.5;\n        return this.moveRight;\n    }\n\n    reset(): void {\n        this.visible = false;\n        this.exploding = false;\n        this.setImageOne(); // dubious\n    }\n\n    setImageOne() {\n        this.sx = 0;\n        this.sy = 0;\n        this.sWidth = 16;\n        this.sHeight = 8;\n        this.dWidth = 12;\n        this.dHeight = 6;\n    }\n\n    setExplode() {\n        this.sx = 16;\n        this.sy = 0;\n        this.sWidth = 21;\n        this.sHeight = 8;\n        this.dWidth = 16;\n        this.dHeight = 6;\n    }\n}\n","import AlienSquiglyShot from \"../../../assets/alien-squigly-shot.png\";\nimport {AlienRocketComponent} from \"./alien-rocket-component\";\n\nexport class AlienSquiglyShotComponent extends AlienRocketComponent {\n\n    constructor() {\n        const img = new Image();\n        img.src = AlienSquiglyShot;\n        super({sx: 0, sy: 0, sWidth: 3, sHeight: 7, dWidth: 3, dHeight: 7, img});\n    }\n\n    setImageOne() {\n        this.sx = 0;\n        this.sy = 0;\n        this.img.src = AlienSquiglyShot;\n        this.resetImg();\n    }\n\n    setImageTwo() {\n        this.sx = 3;\n        this.sy = 0;\n        this.img.src = AlienSquiglyShot;\n        this.resetImg();\n    }\n\n    setImageThree() {\n        this.sx = 6;\n        this.sy = 0;\n        this.img.src = AlienSquiglyShot;\n        this.resetImg();\n    }\n\n    setImageFour() {\n        this.sx = 9;\n        this.sy = 0;\n        this.img.src = AlienSquiglyShot;\n        this.resetImg();\n    }\n\n    private resetImg() {\n        this.sWidth = 3;\n        this.sHeight = 7;\n        this.dWidth = 3;\n        this.dHeight = 7;\n    }\n}\n","import AlienThreeImage from \"../../../assets/alien-three.png\";\nimport {AlienImgComponent} from \"./alien-img-component\";\n\nexport class AlienThreeImgComponent extends AlienImgComponent {\n\n    points: number = 10;\n\n    constructor() {\n        const img = new Image();\n        img.src = AlienThreeImage;\n        super({sx: 0, sy: 0, sWidth: 24, sHeight: 16, dWidth: 12, dHeight: 8, img: img});\n    }\n\n    setImageOne() {\n        this.sx = 0;\n        this.sy = 0;\n        this.img.src = AlienThreeImage;\n        this.resetImg();\n    }\n\n    setImageTwo() {\n        this.sx = 24;\n        this.sy = 0;\n        this.img.src = AlienThreeImage;\n        this.resetImg();\n    }\n\n    private resetImg() {\n        this.sWidth = 24;\n        this.sHeight = 16;\n        this.dWidth = 12;\n        this.dHeight = 8;\n    }\n}\n","import AlienTwoImage from \"../../../assets/alien-two.png\";\nimport {AlienImgComponent} from \"./alien-img-component\";\n\nexport class AlienTwoImgComponent extends AlienImgComponent {\n\n    points: number = 20;\n\n    constructor() {\n        const img = new Image();\n        img.src = AlienTwoImage;\n        super({sx: 0, sy: 0, sWidth: 24, sHeight: 16, dWidth: 12, dHeight: 8, img: img});\n    }\n\n    setImageOne() {\n        this.sx = 0;\n        this.sy = 0;\n        this.img.src = AlienTwoImage;\n        this.resetImg();\n    }\n\n    setImageTwo() {\n        this.sx = 24;\n        this.sy = 0;\n        this.img.src = AlienTwoImage;\n        this.resetImg();\n    }\n\n    private resetImg() {\n        this.sWidth = 24;\n        this.sHeight = 16;\n        this.dWidth = 12;\n        this.dHeight = 8;\n    }\n}\n","import {Component} from \"./component\";\n\nexport class CanvasComponent implements Component {\n\n    name: string = 'CanvasComponent';\n\n    ctx: CanvasRenderingContext2D;\n\n    constructor(canvas: HTMLCanvasElement) {\n        this.ctx = canvas.getContext('2d')!;\n    }\n}\n","import {Component} from \"./component\";\n\nexport class CeilingLineComponent implements Component {\n\n    name: string = 'CeilingLineComponent';\n\n}\n","import {Component} from \"./component\";\n\nexport class ExtentComponent implements Component {\n\n    name = 'ExtentComponent';\n\n    minx: number;\n    miny: number;\n    maxx: number;\n    maxy: number;\n    extent: [number, number, number, number];\n\n    constructor(minx: number, miny: number, width: number, height: number) {\n        this.minx = minx;\n        this.miny = miny;\n        this.maxx = this.minx + width;\n        this.maxy = this.miny + height;\n        this.extent = [this.minx, this.miny, this.maxx, this.maxy];\n    }\n\n    setExtent(x: number, width: number, y: number, height: number) {\n        this.minx = x;\n        this.miny = y;\n        this.maxx = this.minx + width;\n        this.maxy = this.miny + height;\n        this.extent = [this.minx, this.miny, this.maxx, this.maxy];\n    }\n\n    getTopLeft() {\n        return [this.minx, this.miny];\n    }\n\n    getBottomRight() {\n        return [this.maxx, this.maxy];\n    }\n\n    intersects(extent: ExtentComponent): boolean {\n        return this.minx <= extent.maxx\n            && this.maxx >= extent.minx\n            && this.miny <= extent.maxy\n            && this.maxy >= extent.miny;\n    }\n}\n","import {Component} from \"./component\";\n\nexport class FinishLineComponent implements Component {\n\n    name: string = 'FinishLineComponent';\n\n}\n","import {Component} from \"./component\";\n\nexport class ImageComponent implements Component {\n\n    name: string = \"ImageComponent\";\n\n    visible: boolean = true;\n\n    sx: number;\n    sy: number;\n    sWidth: number;\n    sHeight: number;\n    dWidth: number;\n    dHeight: number;\n    img: HTMLImageElement;\n\n    constructor(params: {sx: number, sy: number, sWidth: number, sHeight: number,\n                        dWidth: number, dHeight: number, img: HTMLImageElement}) {\n        this.sx = params.sx;\n        this.sy = params.sy;\n        this.sWidth = params.sWidth;\n        this.sHeight = params.sHeight;\n        this.dWidth = params.dWidth;\n        this.dHeight = params.dHeight;\n        this.img = params.img;\n    }\n}\n","import {ImageComponent} from \"../image-component\";\nimport PlayerImg from \"../../../assets/friendly-ship.png\";\n\nexport class PlayerComponent extends ImageComponent {\n\n    name: string = 'PlayerComponent';\n\n    rightPressed: boolean = false;\n    leftPressed: boolean = false;\n    fireRocket: boolean = false;\n\n    exploding = false;\n    explosionFrameCount = performance.now();\n\n    constructor() {\n        const img = new Image();\n        img.src = PlayerImg;\n        super({sx: 0, sy: 0, sWidth: 26, sHeight: 16, dWidth: 13, dHeight: 7, img: img});\n    }\n\n    reset(): void {\n        this.visible = true;\n        this.exploding = false;\n        this.setImageOne();\n    }\n\n    setImageOne() {\n        this.sx = 0;\n        this.sy = 0;\n        this.img.src = PlayerImg;\n        this.resetImg();\n    }\n\n    setExplode() {\n        this.sx = 26;\n        this.sy = 0;\n        this.sWidth = 30;\n        this.sHeight = 16;\n        this.dWidth = 15;\n        this.dHeight = 7;\n        this.img.src = PlayerImg;\n    }\n\n    private resetImg() {\n        this.sWidth = 26;\n        this.sHeight = 16;\n        this.dWidth = 13;\n        this.dHeight = 7;\n    }\n\n    // resetAlienMoveDelay(): void {\n    //     this.alienMoveDelay = 500;\n    // }\n}\n","import {ImageComponent} from \"../image-component\";\nimport PlayerShot from \"../../../assets/player-shot.png\";\nimport PlayerShotExploding from \"../../../assets/player-shot-exploding.png\";\n\nexport class PlayerRocketComponent extends ImageComponent {\n\n    name: string = 'PlayerRocketComponent';\n\n    visible: boolean = false;\n    triggerTime = performance.now();\n\n    exploding = false;\n    explosionFrameCount = performance.now();\n\n    constructor() {\n        const img = new Image();\n        img.src = PlayerShot;\n        super({sx: 0, sy: 0, sWidth: 1, sHeight: 4, dWidth: 1, dHeight: 4, img: img});\n    }\n\n    reset() {\n        this.visible = false;\n        this.exploding = false;\n        this.triggerTime = performance.now();\n        this.setImageOne();\n    }\n\n    setImageOne() {\n        this.sx = 0;\n        this.sy = 0;\n        this.img.src = PlayerShot;\n        this.resetImg();\n    }\n\n    private resetImg() {\n        this.sWidth = 1;\n        this.sHeight = 4;\n        this.dWidth = 1;\n        this.dHeight = 4;\n    }\n\n    setExplode() {\n        this.sx = 0;\n        this.sy = 0;\n        this.sWidth = 8;\n        this.sHeight = 8;\n        this.dWidth = 8;\n        this.dHeight = 8;\n        this.img.src = PlayerShotExploding;\n    }\n}\n","import {Component} from \"./component\";\n\nexport class PositionComponent implements Component{\n\n    name: string = \"PositionComponent\";\n\n    dx: number;\n    dy: number;\n    spawnX: number;\n    spawnY: number;\n\n    constructor(params: {dx: number; dy: number}) {\n        this.spawnX = params.dx;\n        this.spawnY = params.dy;\n        this.dx = params.dx;\n        this.dy = params.dy;\n    }\n\n    reset(): void {\n        this.dx = this.spawnX;\n        this.dy = this.spawnY;\n    }\n}\n","import {ImageComponent} from \"./image-component\";\nimport ShieldImage from \"../../assets/friendly-blocks.png\";\n\nexport class ShieldComponent extends ImageComponent {\n\n    name: string = 'ShieldComponent';\n    hits: number = 5;\n\n    constructor() {\n        const img = new Image();\n        img.src = ShieldImage;\n        super({sx: 0, sy: 0, sWidth: 44, sHeight: 32, dWidth: 22, dHeight: 16, img});\n        this.setImageOne();\n    }\n\n    reset(): void {\n        this.visible = true;\n        this.hits = 5;\n        this.setImageOne();\n    }\n\n    setImageOne() {\n        this.sx = 0;\n        this.sy = 0;\n    }\n\n    setImageTwo() {\n        this.sx = 132;\n        this.sy = 0;\n    }\n\n    setImageThree() {\n        this.sx = 176;\n        this.sy = 0;\n    }\n\n    setImageFour() {\n        this.sx = 88;\n        this.sy = 0;\n    }\n\n    setImageFive() {\n        this.sx = 44;\n        this.sy = 0;\n    }\n}\n","import {Entity} from \"./entities/entity\";\nimport {CanvasEntity} from \"./entities/canvas-entity\";\nimport {PlayerEntity} from \"./entities/player-entity\";\nimport {PlayerRocketEntities} from \"./entities/player-rocket-entities\";\nimport {AlienEntities} from \"./entities/alien-entities\";\nimport {AlienRocketsEntities} from \"./entities/alien-rockets-entities\";\nimport {AlienSaucerEntity} from \"./entities/alien-saucer-entity\";\nimport {ShieldEntity} from \"./entities/shield-entities\";\nimport {FinishLineEntity} from \"./entities/finish-line-entity\";\nimport {CeilingLineEntity} from \"./entities/ceiling-line.entity\";\n\nexport class Entities {\n\n    private readonly canvas: HTMLCanvasElement;\n    private playerEntity: PlayerEntity;\n    private entities: Map<string, Entity[]> = new Map();\n\n    constructor(canvas: HTMLCanvasElement) {\n        this.canvas = canvas;\n        this.playerEntity = new PlayerEntity();\n        this.entities.set(PlayerEntity.name, this.playerEntity.getEntities());\n    }\n\n    getEntities(): Map<string, Entity[]> {\n        const canvasEntity = new CanvasEntity(this.canvas);\n        this.entities.set(canvasEntity.name, canvasEntity.getEntities());\n\n        const playerRockets = new PlayerRocketEntities();\n        this.entities.set(PlayerRocketEntities.name, playerRockets.getEntities());\n\n        const aliens = new AlienEntities(30, 24);\n        this.entities.set(AlienEntities.name, aliens.getEntities());\n\n        const alienRockets = new AlienRocketsEntities();\n        this.entities.set(AlienRocketsEntities.name, alienRockets.getEntities());\n\n        const saucer = new AlienSaucerEntity(23, -30);\n        this.entities.set(AlienSaucerEntity.name, saucer.getEntities());\n\n        const shields = new ShieldEntity();\n        this.entities.set(ShieldEntity.name, shields.getEntities());\n\n        const finishLine = new FinishLineEntity();\n        this.entities.set(finishLine.name, finishLine.getEntities());\n\n        const ceilingLine = new CeilingLineEntity();\n        this.entities.set(ceilingLine.name, ceilingLine.getEntities());\n\n        return this.entities;\n    }\n}\n","import {Entity} from \"./entity\";\nimport {EntityImpl} from \"./entity-impl\";\nimport {PositionComponent} from \"../components/position-component\";\nimport {AlienOneImgComponent} from \"../components/aliens/alien-one-img-component\";\nimport {AlienTwoImgComponent} from \"../components/aliens/alien-two-img-component\";\nimport {AlienThreeImgComponent} from \"../components/aliens/alien-three-img-component\";\nimport {ExtentComponent} from \"../components/extent-component\";\n\nexport class AlienEntities {\n\n    name = \"AlienEntities\";\n    entities: Entity[] = [];\n\n    constructor(top: number, left: number) {\n        this.createAlienOne(11, top, left);\n        this.createAlienTwo(11, top, left);\n        this.createAlienThree(11, top, left);\n    }\n\n    getEntities(): Entity[] {\n        return this.entities;\n    }\n\n    private createAlienOne(quantity: number, top: number, left: number) {\n        for (let i = 0; i < quantity; i++) {\n            const entity = new EntityImpl();\n            entity.addComponent(new ExtentComponent(0, 0, 1, 1));\n            entity.addComponent(new PositionComponent({dx: left + i * 16, dy: top}));\n            entity.addComponent(new AlienOneImgComponent());\n            this.entities.push(entity);\n        }\n        for (let i = 0; i < quantity; i++) {\n            const entity = new EntityImpl();\n            entity.addComponent(new ExtentComponent(0, 0, 1, 1));\n            entity.addComponent(new PositionComponent({dx: left + i * 16, dy: top + 16}));\n            entity.addComponent(new AlienOneImgComponent());\n            this.entities.push(entity);\n        }\n    }\n\n    private createAlienTwo(quantity: number, top: number, left: number) {\n        for (let i = 0; i < quantity; i++) {\n            let entity = new EntityImpl();\n            entity.addComponent(new ExtentComponent(0, 0, 1, 1));\n            entity.addComponent(new PositionComponent({dx: left + i * 16, dy: top + 32}));\n            entity.addComponent(new AlienTwoImgComponent());\n            this.entities.push(entity);\n        }\n        for (let i = 0; i < quantity; i++) {\n            let entity = new EntityImpl();\n            entity.addComponent(new ExtentComponent(0, 0, 1, 1));\n            entity.addComponent(new PositionComponent({dx: left + i * 16, dy: top + 48}));\n            entity.addComponent(new AlienTwoImgComponent());\n            this.entities.push(entity);\n        }\n    }\n\n    private createAlienThree(quantity: number, top: number, left: number) {\n        for (let i = 0; i < quantity; i++) {\n            let entity = new EntityImpl();\n            entity.addComponent(new ExtentComponent(0, 0, 1, 1));\n            entity.addComponent(new PositionComponent({dx: left + i * 16, dy: top + 64}));\n            entity.addComponent(new AlienThreeImgComponent());\n            this.entities.push(entity);\n        }\n        for (let i = 0; i < quantity; i++) {\n            let entity = new EntityImpl();\n            entity.addComponent(new ExtentComponent(0, 0, 1, 1));\n            entity.addComponent(new PositionComponent({dx: left + i * 16, dy: top + 80}));\n            entity.addComponent(new AlienThreeImgComponent());\n            this.entities.push(entity);\n        }\n    }\n}\n","import {Entity} from \"./entity\";\nimport {EntityImpl} from \"./entity-impl\";\nimport {PositionComponent} from \"../components/position-component\";\nimport {AlienPlungerShotComponent} from \"../components/aliens/alien-plunger-shot-component\";\nimport {AlienSquiglyShotComponent} from \"../components/aliens/alien-squigly-shot-component\";\nimport {ExtentComponent} from \"../components/extent-component\";\n\nexport class AlienRocketsEntities {\n\n    name = \"AlienRocketEntity\";\n    entities: Entity[] = [];\n\n    constructor() {\n        let entity = new EntityImpl();\n        entity.addComponent(new ExtentComponent(0, 0, 1, 4));\n        entity.addComponent(new PositionComponent({dx: 0, dy: 0}));\n        entity.addComponent(new AlienPlungerShotComponent());\n        this.entities.push(entity);\n\n        entity = new EntityImpl();\n        entity.addComponent(new ExtentComponent(0, 0, 1, 4));\n        entity.addComponent(new PositionComponent({dx: 0, dy: 0}));\n        entity.addComponent(new AlienSquiglyShotComponent());\n        this.entities.push(entity);\n    }\n\n    getEntities(): Entity[] {\n        return this.entities;\n    }\n}\n","import {Entity} from \"./entity\";\nimport {EntityImpl} from \"./entity-impl\";\nimport {PositionComponent} from \"../components/position-component\";\nimport {AlienSaucerImgComponent} from \"../components/aliens/alien-saucer-img-component\";\nimport {ExtentComponent} from \"../components/extent-component\";\n\nexport class AlienSaucerEntity {\n\n    name = \"AlienSaucerEntity\";\n    entities: Entity[] = [];\n\n    constructor(top: number, left: number) {\n        const entity = new EntityImpl();\n        entity.addComponent(new ExtentComponent(0, 0, 12, 6));\n        entity.addComponent(new PositionComponent({dx: left, dy: top}));\n        entity.addComponent(new AlienSaucerImgComponent());\n        this.entities.push(entity);\n    }\n\n    getEntities(): Entity[] {\n        return this.entities;\n    }\n}\n","import {Entity} from \"./entity\";\nimport {EntityImpl} from \"./entity-impl\";\nimport {CanvasComponent} from \"../components/canvas-component\";\n\nexport class CanvasEntity {\n\n    name = \"CanvasEntity\";\n    entity: Entity;\n\n    constructor(canvas: HTMLCanvasElement) {\n        const entity = new EntityImpl();\n        entity.addComponent(new CanvasComponent(canvas));\n        this.entity = entity;\n    }\n\n    getEntities(): Entity[] {\n        const entities = new Array<Entity>();\n        entities.push(this.entity);\n        return entities;\n    }\n}\n","import {Entity} from \"./entity\";\nimport {EntityImpl} from \"./entity-impl\";\nimport {ExtentComponent} from \"../components/extent-component\";\nimport {CeilingLineComponent} from \"../components/ceiling-line-component\";\n\nexport class CeilingLineEntity {\n\n    name = \"CeilingLineEntity\";\n    entity: Entity;\n\n    constructor() {\n        const entity = new EntityImpl();\n        entity.addComponent(new CeilingLineComponent());\n        entity.addComponent(new ExtentComponent(0, 23, 224, 1));\n        this.entity = entity;\n    }\n\n    getEntities(): Entity[] {\n        const entities = new Array<Entity>();\n        entities.push(this.entity);\n        return entities;\n    }\n}\n","import {Entity} from \"./entity\";\nimport {Component} from \"../components/component\";\n\nexport class EntityImpl implements Entity {\n\n    id: string;\n    components: Map<string, Component>;\n\n    constructor() {\n        this.id = (+new Date()).toString(16) + (Math.random() * 100000000 | 0).toString(16);\n        this.components = new Map();\n    }\n\n    addComponent(component: Component): void {\n        this.components.set(component.name, component);\n    }\n\n    removeComponent(component: Component): void {\n        this.components.delete(component.name);\n    }\n\n    print(): void {\n        console.log(JSON.stringify(this, null, 4));\n    }\n\n}\n","import {Entity} from \"./entity\";\nimport {EntityImpl} from \"./entity-impl\";\nimport {FinishLineComponent} from \"../components/finish-line-component\";\nimport {ExtentComponent} from \"../components/extent-component\";\n\nexport class FinishLineEntity {\n\n    name = \"FinishLineEntity\";\n    entity: Entity;\n\n    constructor() {\n        const entity = new EntityImpl();\n        entity.addComponent(new FinishLineComponent());\n        entity.addComponent(new ExtentComponent(0, 256 - 18, 224, 1));\n        this.entity = entity;\n    }\n\n    getEntities(): Entity[] {\n        const entities = new Array<Entity>();\n        entities.push(this.entity);\n        return entities;\n    }\n}\n","import {EntityImpl} from \"./entity-impl\";\nimport {Entity} from \"./entity\";\nimport {PositionComponent} from \"../components/position-component\";\nimport {PlayerComponent} from \"../components/player/player-component\";\nimport {ExtentComponent} from \"../components/extent-component\";\n\nexport class PlayerEntity {\n\n    name = \"PlayerEntity\";\n    entity: Entity;\n\n    constructor() {\n        const entity = new EntityImpl();\n        entity.addComponent(new PositionComponent({dx: 105, dy: 230}));\n        entity.addComponent(new PlayerComponent());\n        entity.addComponent(new ExtentComponent(105, 230 - 7, 13, 7));\n        this.entity = entity;\n    }\n\n    getEntities(): Entity[] {\n        const entities = new Array<Entity>();\n        entities.push(this.entity);\n        return entities;\n    }\n}\n","import {Entity} from \"./entity\";\nimport {EntityImpl} from \"./entity-impl\";\nimport {PositionComponent} from \"../components/position-component\";\nimport {PlayerRocketComponent} from \"../components/player/player-rocket-component\";\nimport {ExtentComponent} from \"../components/extent-component\";\n\nexport class PlayerRocketEntities {\n\n    name = \"PlayerRocketEntities\";\n    entities: Entity[] = [];\n\n    constructor() {\n        for (let i = 0; i < 3; i++) {\n            const entity = new EntityImpl();\n            entity.addComponent(new ExtentComponent(0, 0, 1, 4));\n            entity.addComponent(new PositionComponent({dx: 0, dy: 0}));\n            entity.addComponent(new PlayerRocketComponent());\n            this.entities.push(entity);\n        }\n    }\n\n    getEntities(): Entity[] {\n        return this.entities;\n    }\n}\n","import {Entity} from \"./entity\";\nimport {EntityImpl} from \"./entity-impl\";\nimport {ShieldComponent} from \"../components/shield-component\";\nimport {PositionComponent} from \"../components/position-component\";\nimport {ExtentComponent} from \"../components/extent-component\";\n\nexport class ShieldEntity {\n\n    name = \"AlienSaucerEntity\";\n    entities: Entity[] = [];\n\n    constructor() {\n        this.createShields();\n    }\n\n    getEntities(): Entity[] {\n        return this.entities;\n    }\n\n    private createShields() {\n        let entity = new EntityImpl();\n        entity.addComponent(new ExtentComponent(32, 200, 22, 16));\n        entity.addComponent(new ShieldComponent());\n        entity.addComponent(new PositionComponent({dx: 32, dy: 200}))\n        this.entities.push(entity);\n\n        entity = new EntityImpl();\n        entity.addComponent(new ExtentComponent(77, 200, 22, 16));\n        entity.addComponent(new ShieldComponent());\n        entity.addComponent(new PositionComponent({dx: 77, dy: 200}))\n        this.entities.push(entity);\n\n        entity = new EntityImpl();\n        entity.addComponent(new ExtentComponent(122, 200, 22, 16));\n        entity.addComponent(new ShieldComponent());\n        entity.addComponent(new PositionComponent({dx: 122, dy: 200}))\n        this.entities.push(entity);\n\n        entity = new EntityImpl();\n        entity.addComponent(new ExtentComponent(172, 200, 22, 16));\n        entity.addComponent(new ShieldComponent());\n        entity.addComponent(new PositionComponent({dx: 172, dy: 200}))\n        this.entities.push(entity);\n    }\n}\n","import {GameState} from \"../../game-state\";\nimport {GameSettings} from \"../../game-settings\";\n\nexport type Stars = {\n    xPos: number;\n    yPos: number;\n    w: number;\n    h: number;\n    alpha: number;\n}\n\nexport abstract class BasePage {\n\n    protected canvas: HTMLCanvasElement;\n    protected ctx: CanvasRenderingContext2D;\n    protected state: GameState;\n    protected settings: GameSettings;\n    protected stars: Stars[] = [];\n\n    protected constructor(state: GameState, settings: GameSettings) {\n        this.canvas = document.getElementById('game')! as HTMLCanvasElement;\n        this.ctx = this.canvas.getContext(\"2d\")!;\n        this.state = state;\n        this.settings = settings;\n    }\n\n    protected createRings() {\n        const centerX = this.settings.relativeWidth / 2;\n        const centerY = this.settings.relativeHeight / 2;\n        this.ctx.strokeStyle = `rgba(255, 255, 255, 1)`;\n        for (let i=1; i<2; i++) {\n            this.ctx.beginPath();\n            this.ctx.arc(centerX, centerY, i * 20 , 0, 2 * Math.PI);\n            this.ctx.stroke();\n        }\n    }\n\n    protected generateStars(): Stars[] {\n        const stars: Stars[] = [];\n        const canvasSize = this.settings.relativeWidth * this.settings.relativeHeight;\n        const starsFraction = canvasSize / 500;\n\n        const centerX = this.settings.relativeWidth / 2;\n        const centerY = this.settings.relativeHeight / 2;\n\n        for(let i = 0; i < starsFraction; i++) {\n            //Set up random elements\n            let xPos = this.random(centerX - 100, centerX + 100);\n            let yPos = this.random(centerY - 20, centerY + 20);\n            let alpha = this.random(0.5, 1);\n            let size = this.random(0.1, 0.5);\n            stars.push({xPos, yPos, w: size, h: size, alpha});\n        }\n\n        return stars;\n    }\n\n    protected updateStarsPosition() {\n        this.stars.forEach(star => {\n            // Expand the stars from the center\n            const centerX = this.settings.relativeWidth / 2;\n            const centerY = this.settings.relativeHeight / 2;\n\n            // calculate unit vector\n            const xV = star.xPos - centerX;\n            const yV = (star.yPos < centerY) ? centerY - star.yPos : -star.yPos + centerY;\n            const magnitude = Math.sqrt(xV * xV + yV * yV);\n            const uX = Math.abs(xV / magnitude);\n            const uY = Math.abs(yV / magnitude);\n\n            if (star.xPos === centerX) {\n                const xPos = this.random(centerX -10 , centerX + 10);\n                star.xPos = (xPos === centerX) ? xPos + 1 : xPos;\n            } else if (star.xPos < centerX && star.xPos > 0) {\n                star.xPos -= uX;\n            } else if (star.xPos > centerX && star.xPos < this.settings.relativeWidth) {\n                star.xPos += uX;\n            } else if (star.xPos < 0 || star.xPos > this.settings.relativeWidth) {\n                const xPos = this.random(centerX -10 , centerX + 10);\n                star.xPos = (xPos === centerX) ? xPos - 1 : xPos;\n            }\n\n            if (star.yPos === centerY) {\n                const yPos = this.random(centerY - 10, centerY + 10);\n                star.yPos = (yPos === centerY) ? yPos + 1 : yPos;\n            } else if (star.yPos < centerY && star.yPos > 0) {\n                star.yPos -= uY;\n            } else if (star.yPos > centerY && star.yPos < this.settings.relativeHeight) {\n                star.yPos += uY;\n            } else if (star.yPos < 0 || star.yPos > this.settings.relativeHeight) {\n                const yPos = this.random(centerY - 10, centerY + 10);\n                star.yPos = (yPos === centerY) ? yPos - 1 : yPos;\n            }\n        });\n    }\n\n    protected createVectors() {\n        const centerX = this.settings.relativeWidth / 2;\n        const centerY = this.settings.relativeHeight / 2;\n        this.ctx.strokeStyle = `rgba(255, 255, 255, 0.5)`;\n        this.stars.forEach(star => {\n            // calculate unit vector\n            const xV = star.xPos - centerX;\n            const yV = (star.yPos < centerY) ? centerY - star.yPos : -star.yPos + centerY;\n            const magnitude = Math.sqrt(xV * xV + yV * yV);\n            const uX = Math.abs(xV / magnitude);\n            const uY = Math.abs(yV / magnitude);\n\n            let xDelta = centerX;\n            let yDelta = centerY;\n            if (star.xPos < centerX - uX * 20 && star.xPos > 0) {\n                xDelta = star.xPos - uX * -10;\n            } else if (star.xPos > centerX + 20 && star.xPos < this.settings.relativeWidth) {\n                xDelta = star.xPos + uX * -10;\n            }\n\n            if (star.yPos < centerY + uY * 20 && star.yPos > 0) {\n                yDelta = star.yPos - uY * -10;\n            } else if (star.yPos > centerY - 20 && star.yPos < this.settings.relativeHeight) {\n                yDelta = star.yPos + uY * -10;\n            }\n\n            if (xDelta !== centerX && yDelta !== centerY) {\n                this.ctx.beginPath();\n                this.ctx.moveTo(xDelta, yDelta);\n                this.ctx.lineTo(star.xPos + star.w / 2, star.yPos + star.h / 2);\n                this.ctx.stroke();\n            }\n        });\n    }\n\n    private random(min: number, max: number): number {\n        return min + Math.random() * (max + 1 - min);\n    }\n}\n","import {GameState} from \"../../game-state\";\nimport {GameSettings} from \"../../game-settings\";\nimport {BasePage, Stars} from \"./base-page\";\nimport {HighScores} from \"../../high-scores\";\n\nexport class End extends BasePage {\n\n    constructor(state: GameState, settings: GameSettings) {\n        super(state, settings);\n        this.stars = this.generateStars();\n    }\n\n    process() {\n        if (this.state.game.end) {\n            this.clearCanvas();\n            this.setBackground();\n\n            // Draw\n            this.drawLayerOne();\n            this.drawLayerTwo();\n        }\n    }\n\n    private clearCanvas() {\n        this.ctx.clearRect(0, 0, this.settings.relativeWidth, this.settings.relativeHeight);\n    }\n\n    private setBackground() {\n        this.ctx.fillStyle = 'rgb(0, 0, 0, 0.9)';\n        this.ctx.fillRect(0, 0, this.settings.relativeWidth, this.settings.relativeHeight);\n    }\n\n    private drawLayerOne() {\n        this.updateStarsPosition();\n        this.stars.forEach((value: Stars) => {\n            this.ctx.fillStyle = `rgba(255, 255, 255, ${value.alpha})`;\n            this.ctx.fillRect(value.xPos, value.yPos, value.w, value.h);\n        });\n        // this.createRings();\n        // this.createVectors();\n    }\n\n    private drawLayerTwo() {\n        this.ctx.fillStyle = 'rgb(255, 255, 255)';\n        const fontSize = 6;\n        this.ctx.font = fontSize + 'px SpaceInvaders';\n        let x = 105;\n        let y = 110;\n        if (this.state.game.hiScore) {\n            this.ctx.fillText(\"End\", x, y);\n            this.ctx.fillText(\"Click to add Hi-score\", x - 45, y + 15);\n            this.ctx.fillText(\"SCORE: \" + this.state.player.score.toString(), x - 20, y + 30);\n        } else {\n            const highScores = localStorage.getItem('highScores');\n            if (highScores) {\n                this.ctx.fillText(\"HI-SCORES\", x - 18, y - 15);\n                const object = JSON.parse(highScores) as HighScores;\n                const hiScore = object.values.sort((a, b) => b.score - a.score);\n                for (let i=0; i<hiScore.length && i<5; i++) {\n                    const item = hiScore[i];\n                    this.ctx.fillText(`${item.name}`, x - 40, y + 15 * i);\n                    this.ctx.fillText(`${item.score}`, x + 40, y + 15 * i);\n                }\n            }\n        }\n    }\n}\n","import {GameState} from \"../../game-state\";\nimport {GameSettings} from \"../../game-settings\";\nimport {BasePage, Stars} from \"./base-page\";\n\nexport class Intro extends BasePage {\n\n    private lastTick: number = 0;\n    private frameCount: number = 0;\n\n    constructor(state: GameState, settings: GameSettings) {\n        super(state, settings);\n        if (this.lastTick == 0) {\n            this.lastTick = this.settings.lastTick;\n        }\n        this.stars = this.generateStars();\n    }\n\n    process() {\n        if (this.state.game.intro) {\n            this.clearCanvas();\n            this.setBackground();\n\n            // Draw\n            this.drawLayerOne();\n            this.drawLayerTwo();\n        }\n    }\n\n    private clearCanvas() {\n        this.ctx.clearRect(0, 0, this.settings.relativeWidth, this.settings.relativeHeight);\n    }\n\n    private setBackground() {\n        this.ctx.fillStyle = 'rgb(0, 0, 0, 0.9)';\n        this.ctx.fillRect(0, 0, this.settings.relativeWidth, this.settings.relativeHeight);\n    }\n\n    private drawLayerOne() {\n        this.updateStarsPosition();\n        this.stars.forEach((value: Stars) => {\n            this.ctx.fillStyle = `rgba(255, 255, 255, ${value.alpha})`;\n            this.ctx.fillRect(value.xPos, value.yPos, value.w, value.h);\n        });\n        // this.createRings();\n        // this.createVectors();\n    }\n\n    private drawLayerTwo() {\n        this.ctx.fillStyle = 'rgb(255, 255, 255)';\n        const fontSize = 6;\n        this.ctx.font = fontSize + 'px SpaceInvaders';\n        let x = 70;\n        let y = 125;\n        this.ctx.fillText(\"SPACE INVADERS\", x, y);\n        this.frameCount ++;\n        if (this.frameCount < 25) {\n            this.ctx.fillText(\"Press SPACE to start\", x - 18, y + 15);\n            this.lastTick = this.settings.lastTick;\n        } else if (this.frameCount >= 50) {\n            this.frameCount = 0;\n        }\n    }\n}\n","import {GameState} from \"../../game-state\";\nimport {GameSettings} from \"../../game-settings\";\nimport {BasePage, Stars} from \"./base-page\";\n\nexport class Respawn extends BasePage {\n\n    private lastTick: number = 0;\n    private frameCount: number = 0;\n\n    constructor(state: GameState, settings: GameSettings) {\n        super(state, settings);\n        if (this.lastTick == 0) {\n            this.lastTick = this.settings.lastTick;\n        }\n        this.stars = this.generateStars();\n    }\n\n    process() {\n        if (this.state.game.respawn) {\n            this.clearCanvas();\n            this.setBackground();\n\n            // Draw\n            this.drawLayerOne();\n            this.drawLayerTwo();\n        }\n    }\n\n    private clearCanvas() {\n        this.ctx.clearRect(0, 0, this.settings.relativeWidth, this.settings.relativeHeight);\n    }\n\n    private setBackground() {\n        this.ctx.fillStyle = 'rgb(0, 0, 0, 0.9)';\n        this.ctx.fillRect(0, 0, this.settings.relativeWidth, this.settings.relativeHeight);\n    }\n\n    private drawLayerOne() {\n        this.updateStarsPosition();\n        this.stars.forEach((value: Stars) => {\n            this.ctx.fillStyle = `rgba(255, 255, 255, ${value.alpha})`;\n            this.ctx.fillRect(value.xPos, value.yPos, value.w, value.h);\n        });\n        // this.createRings();\n        // this.createVectors();\n    }\n\n    private drawLayerTwo() {\n        this.ctx.fillStyle = 'rgb(255, 255, 255)';\n        const fontSize = 6;\n        this.ctx.font = fontSize + 'px SpaceInvaders';\n        let x = 70;\n        let y = 125;\n        this.ctx.fillText(\"SPACE INVADERS\", x, y);\n        this.frameCount ++;\n        if (this.frameCount < 25) {\n            this.ctx.fillText(\"Press SPACE to respawn\", x - 18, y + 15);\n            this.lastTick = this.settings.lastTick;\n        } else if (this.frameCount >= 50) {\n            this.frameCount = 0;\n        }\n        this.ctx.fillText(\"SCORE: \" + this.state.player.score.toString(), x, y + 30);\n    }\n}\n","import {CanvasSystem} from \"./systems/canvas-system\";\nimport {UserInputSystem} from \"./systems/user-input-system\";\nimport {AlienRocketSystem} from \"./systems/alien-rocket-system\";\nimport {CollisionSystem} from \"./systems/collision-system\";\nimport {GameLogicSystem} from \"./systems/game-logic-system\";\nimport {MotionSystem} from \"./systems/motion-system\";\nimport {RenderSystem} from \"./systems/render-system\";\nimport {System} from \"./systems/system\";\nimport {Entity} from \"./entities/entity\";\nimport {GameSettings} from \"../game-settings\";\nimport {GameState} from \"../game-state\";\n\nexport class Systems {\n\n    private readonly entities: Map<string, Entity[]>;\n    private readonly settings: GameSettings;\n    private readonly state: GameState;\n\n    constructor(entities: Map<string, Entity[]>, settings: GameSettings, state: GameState) {\n        this.entities = entities;\n        this.settings = settings;\n        this.state = state;\n    }\n\n    getSystems(canvas: HTMLCanvasElement): System[] {\n        const systems: System[] = [];\n\n        // Process the state of the game\n        const userInputSystem = new UserInputSystem(this.entities, this.settings);\n        systems.push(userInputSystem);\n\n        const alienRocketSystem = new AlienRocketSystem(this.entities, this.settings);\n        systems.push(alienRocketSystem);\n\n        const collisionSystem = new CollisionSystem(this.entities, this.state);\n        systems.push(collisionSystem);\n\n        const gameLogicSystem = new GameLogicSystem(this.entities, this.settings, this.state);\n        systems.push(gameLogicSystem);\n\n        const motionSystem = new MotionSystem(this.entities, this.settings);\n        systems.push(motionSystem);\n\n        // Render the state of the game\n        const canvasSystem = new CanvasSystem(this.entities, this.settings, this.state);\n        systems.push(canvasSystem);\n\n        const renderSystem = new RenderSystem(canvas, this.entities, this.state, this.settings);\n        systems.push(renderSystem);\n\n        return systems;\n    }\n}\n","import {System} from \"./system\";\nimport {Entity} from \"../entities/entity\";\nimport {PositionComponent} from \"../components/position-component\";\nimport {AlienImgComponent} from \"../components/aliens/alien-img-component\";\nimport {AlienEntities} from \"../entities/alien-entities\";\nimport {AlienRocketsEntities} from \"../entities/alien-rockets-entities\";\nimport {AlienRocketComponent} from \"../components/aliens/alien-rocket-component\";\nimport {GameSettings} from \"../../game-settings\";\n\nexport class AlienRocketSystem implements System {\n\n    private aliens: Entity[] = [];\n    private alienRocketEntities: Entity[] = [];\n    private settings: GameSettings;\n\n    constructor(entities: Map<string, Entity[]>, settings: GameSettings) {\n        this.settings = settings;\n        this.aliens = entities.get(AlienEntities.name)!\n        this.alienRocketEntities = entities.get(AlienRocketsEntities.name)!\n    }\n\n    process(): void {\n        const randomAlien = this.get_randomAlien();\n        if (randomAlien) {\n            const alienImg = randomAlien.components.get(AlienImgComponent.name) as AlienImgComponent;\n            const alienPos = randomAlien.components.get(PositionComponent.name) as PositionComponent;\n\n            // Filter not visible\n            const notVisibleRockets = this.alienRocketEntities.filter(entity => {\n                const rocket = entity.components.get(AlienRocketComponent.name) as AlienRocketComponent;\n                return !rocket.visible;\n            });\n\n            // Filter visible and sort by latest triggerTime.\n            const visibleRockets = this.alienRocketEntities.filter(entity => {\n                const rocket = entity.components.get(AlienRocketComponent.name) as AlienRocketComponent;\n                return rocket.visible;\n            }).sort((a, b) => {\n                const left = a.components.get(AlienRocketComponent.name) as AlienRocketComponent;\n                const right = b.components.get(AlienRocketComponent.name) as AlienRocketComponent;\n                return right.triggerTime - left.triggerTime;\n            });\n\n            // If none visible, fire first rocket.\n            if (notVisibleRockets.length === this.alienRocketEntities.length) {\n                const rocket = this.get_random(notVisibleRockets);\n                const plRocket = rocket.components.get(AlienRocketComponent.name) as AlienRocketComponent;\n                const plRocketPos = rocket.components.get(PositionComponent.name) as PositionComponent;\n                if (performance.now() - plRocket.triggerTime > this.settings.aliens.fireDelay) {\n                    this.setRocketVisible(plRocket, plRocketPos, alienPos, alienImg);\n                }\n            }\n            // If visible rockets is less than the total of alien rockets, Fire next rocket with a minimum time difference\n            // from latest visible rocket.\n            else if (visibleRockets.length < this.alienRocketEntities.length) {\n                const rocket = this.get_random(notVisibleRockets);\n                const plRocketVisible = visibleRockets[0].components.get(AlienRocketComponent.name) as AlienRocketComponent;\n                const plRocket = rocket.components.get(AlienRocketComponent.name) as AlienRocketComponent;\n                const plRocketPos = rocket.components.get(PositionComponent.name) as PositionComponent;\n                if (performance.now() - plRocketVisible.triggerTime > this.settings.aliens.fireDelay) {\n                    this.setRocketVisible(plRocket, plRocketPos, alienPos, alienImg);\n                }\n            }\n        }\n    }\n\n    private get_randomAlien() {\n        const aliens = this.aliens.filter(alien => (alien.components.get(AlienImgComponent.name) as AlienImgComponent).visible)\n        return this.get_random(aliens);\n    }\n\n    private get_random(list: Entity[]) {\n        return list[Math.floor((Math.random()*list.length))];\n    }\n\n    private setRocketVisible(plRocket: AlienRocketComponent, plRocketPos: PositionComponent,\n                             alienPos: PositionComponent, alienImg: AlienImgComponent): void {\n        plRocket.visible = true;\n        plRocket.triggerTime = performance.now();\n        plRocketPos.dx = alienPos.dx + alienImg.dWidth / 2;\n        plRocketPos.dy = alienPos.dy + alienImg.dHeight;\n    }\n\n}\n","import {System} from \"./system\";\nimport {Entity} from \"../entities/entity\";\nimport {CanvasComponent} from \"../components/canvas-component\";\nimport FriendlyShip from \"../../assets/friendly-ship.png\";\nimport {CanvasEntity} from \"../entities/canvas-entity\";\nimport {GameSettings} from \"../../game-settings\";\nimport {GameState} from \"../../game-state\";\n\nexport class CanvasSystem implements System {\n\n    private ctx: CanvasRenderingContext2D;\n    private settings: GameSettings;\n    private state: GameState;\n\n    constructor(entities: Map<string, Entity[]>, settings: GameSettings, state: GameState) {\n        const canvas = entities.get(CanvasEntity.name)![0].components.get(CanvasComponent.name) as CanvasComponent;\n        this.ctx = canvas.ctx;\n        this.settings = settings;\n        this.state = state;\n    }\n\n    process(): void {\n        this.clearCanvas();\n        this.setBackground();\n        this.drawScoreBoard();\n        this.drawBottom();\n    }\n\n    clearCanvas() {\n        this.ctx.clearRect(0, 0, this.settings.relativeWidth, this.settings.relativeHeight);\n    }\n\n    setBackground() {\n        this.ctx.fillStyle = 'rgb(0, 0, 0, 0.9)';\n        this.ctx.fillRect(0, 0, this.settings.relativeWidth, this.settings.relativeHeight);\n    }\n\n    drawScoreBoard() {\n        this.ctx.fillStyle = 'rgb(255, 255, 255)';\n        const padding = 5;\n        const fontSize = 6;\n        this.ctx.font = fontSize + 'px SpaceInvaders';\n\n        const column = this.settings.relativeWidth / 3;\n\n        let x = 10;\n        let y = padding + fontSize;\n        let yy = 5 + padding + 2 * fontSize;\n        this.ctx.fillText(\"SCORE<1>\", x, y, column);\n        x = x + 10;\n        this.ctx.fillText(this.state.player.score.toString().padStart(4, '0'), x, yy, column);\n\n        x = column + 10;\n        y = padding + fontSize;\n        yy = 5 + padding + 2 * fontSize;\n        this.ctx.fillText(\"HIGHSCORE\", x, y, column);\n        x = column + 25;\n        this.ctx.fillText(this.state.player.highScore.toString().padStart(4, '0'), x, yy, column);\n\n        x = column * 2 + 23;\n        y = padding + fontSize;\n        yy = 5 + padding + 2 * fontSize;\n        this.ctx.fillText(\"SCORE<2>\", x, y, column);\n        x = column * 2 + 33;\n        this.ctx.fillText(\"0\".padStart(4, '0'), x, yy, column);\n    }\n\n    drawBottom() {\n        const padding = 105;\n        const fontSize = 6;\n        this.ctx.font = fontSize + 'px SpaceInvaders';\n\n        // bottom line\n        this.ctx.fillStyle = 'rgb(0, 255, 0)';\n        this.ctx.fillRect(0, 240, this.settings.relativeWidth, 1);\n\n        // level\n        this.ctx.fillStyle = 'rgb(255, 255, 255)';\n        this.ctx.fillText(this.state.game.level.toString().padStart(2, '0'), padding, 250);\n\n        // lives\n        const img = new Image();\n        img.src = FriendlyShip;\n        const sWidth = 26;\n        const sHeight = 16;\n        let dx = 10;\n        const dy = 242;\n        const dWidth = 16;\n        const dHeight = 8;\n\n        if (this.state.player.lives > 0) {\n            this.ctx.drawImage(img, 0, 0, sWidth, sHeight, dx, dy, dWidth, dHeight);\n        }\n        if (this.state.player.lives > 1) {\n            dx = 30;\n            this.ctx.drawImage(img, 0, 0, sWidth, sHeight, dx, dy, dWidth, dHeight);\n        }\n\n        // credit\n        this.ctx.fillStyle = 'rgb(255, 255, 255)';\n        this.ctx.fillText((\"CREDIT 99\").padStart(2, '0'), 165, 250);\n    }\n\n    strokeDebug() {\n        this.ctx.strokeStyle = 'rgb(255,0,0)';\n        this.ctx.strokeRect(1, 1, this.settings.relativeWidth-1, this.settings.relativeHeight-1);\n    }\n\n\n}\n","import {Entity} from \"../entities/entity\";\nimport {System} from \"./system\";\nimport {PlayerRocketComponent} from \"../components/player/player-rocket-component\";\nimport {ExtentComponent} from \"../components/extent-component\";\nimport {AlienImgComponent} from \"../components/aliens/alien-img-component\";\nimport {AlienSaucerImgComponent} from \"../components/aliens/alien-saucer-img-component\";\nimport {ShieldComponent} from \"../components/shield-component\";\nimport {AlienRocketComponent} from \"../components/aliens/alien-rocket-component\";\nimport {PositionComponent} from \"../components/position-component\";\nimport {PlayerComponent} from \"../components/player/player-component\";\nimport {PlayerEntity} from \"../entities/player-entity\";\nimport {FinishLineEntity} from \"../entities/finish-line-entity\";\nimport {CeilingLineEntity} from \"../entities/ceiling-line.entity\";\nimport {PlayerRocketEntities} from \"../entities/player-rocket-entities\";\nimport {AlienEntities} from \"../entities/alien-entities\";\nimport {AlienSaucerEntity} from \"../entities/alien-saucer-entity\";\nimport {ShieldEntity} from \"../entities/shield-entities\";\nimport {AlienRocketsEntities} from \"../entities/alien-rockets-entities\";\nimport {GameState} from \"../../game-state\";\n\nexport class CollisionSystem implements System {\n\n    private player: Entity;\n    private playerRockets: Entity[];\n    private aliens: Entity[];\n    private saucer: Entity;\n    private shields: Entity[];\n    private alienRockets: Entity[];\n    private floor: Entity;\n    private ceiling: Entity;\n    private state: GameState;\n\n    constructor(entities: Map<string, Entity[]>, state: GameState) {\n        this.player = entities.get(PlayerEntity.name)![0];\n        this.floor = entities.get(FinishLineEntity.name)![0];\n        this.ceiling = entities.get(CeilingLineEntity.name)![0];\n        this.playerRockets = entities.get(PlayerRocketEntities.name)!;\n        this.aliens = entities.get(AlienEntities.name)!;\n        this.saucer = entities.get(AlienSaucerEntity.name)![0];\n        this.shields = entities.get(ShieldEntity.name)!;\n        this.alienRockets = entities.get(AlienRocketsEntities.name)!;\n        this.state = state;\n    }\n\n    process(): void {\n        // Player rockets\n        this.playerRockets.forEach((entity: Entity) => {\n            const components = entity.components;\n            if (components.has(PlayerRocketComponent.name)) {\n                const rocket = components.get(PlayerRocketComponent.name) as PlayerRocketComponent;\n                const rocketPos = components.get(PositionComponent.name) as PositionComponent;\n                const rocketExtent = components.get(ExtentComponent.name) as ExtentComponent;\n                if (rocket.visible) {\n                    this.rocketsAliens(rocket, rocketPos, rocketExtent);\n                    this.rocketsSaucers(rocket, rocketPos, rocketExtent);\n                    this.rocketsShields(rocket, rocketExtent);\n                    this.rocketsRockets(rocket, rocketExtent);\n                    this.rocketsCeiling(rocket, rocketExtent);\n                }\n            }\n        });\n\n        // Alien rockets vs Shields, Player and floor\n        this.alienRockets.forEach((entity: Entity) => {\n            const components = entity.components;\n            const rocket = components.get(AlienRocketComponent.name) as AlienRocketComponent;\n            const rocketExtent = components.get(ExtentComponent.name) as ExtentComponent;\n            if (rocket.visible) {\n                this.rocketsShields(rocket, rocketExtent);\n                this.rocketsPlayer(rocketExtent);\n                this.rocketsFloor(rocket, rocketExtent);\n            }\n        });\n\n        // Aliens vs Shields and Player\n        this.aliens.forEach((entity: Entity) => {\n            const components = entity.components;\n            if (components.has(AlienImgComponent.name)) {\n                const alien = components.get(AlienImgComponent.name) as AlienImgComponent;\n                const alienExtent = components.get(ExtentComponent.name) as ExtentComponent;\n                if (alien.visible) {\n                    this.aliensShields(alien, alienExtent);\n                    this.aliensPlayer(alien, alienExtent);\n                }\n            }\n        });\n    }\n\n    private rocketsPlayer(rocketExtent: ExtentComponent) {\n        const player = this.player.components.get(PlayerComponent.name) as PlayerComponent;\n        const playerExtent = this.player.components.get(ExtentComponent.name) as ExtentComponent;\n        if (this.state.player.alive && rocketExtent.intersects(playerExtent)) {\n            this.state.player.alive = false;\n            this.state.player.lives -= 1;\n            // initiate explosion\n            player.exploding = true;\n            player.explosionFrameCount = performance.now();\n            this.resetRockets();\n\n        }\n    }\n\n    private aliensShields(alien: AlienImgComponent, alienExtent: ExtentComponent) {\n        this.shields.forEach((inner: Entity) => {\n            const shield = inner.components.get(ShieldComponent.name) as ShieldComponent;\n            const shieldExtent = inner.components.get(ExtentComponent.name) as ExtentComponent;\n            if (shield.visible && alienExtent.intersects(shieldExtent)) {\n                this.shieldDecay(shield);\n                alien.visible = false;\n            }\n        });\n    }\n\n    private aliensPlayer(alien: AlienImgComponent, alienExtent: ExtentComponent) {\n        const player = this.player.components.get(PlayerComponent.name) as PlayerComponent;\n        const playerExtent = this.player.components.get(ExtentComponent.name) as ExtentComponent;\n        if (this.state.player.alive && alienExtent.intersects(playerExtent)) {\n            this.state.player.alive = false;\n            this.state.player.lives -= 1;\n            alien.visible = false;\n            // initiate explosion\n            player.exploding = true;\n            player.explosionFrameCount = performance.now();\n            this.resetRockets();\n        }\n    }\n\n    private rocketsAliens(rocket: PlayerRocketComponent,\n                          rocketPos: PositionComponent,\n                          rocketExtent: ExtentComponent) {\n        this.aliens.forEach((inner: Entity) => {\n            const alien = inner.components.get(AlienImgComponent.name) as AlienImgComponent;\n            const alienExtent = inner.components.get(ExtentComponent.name) as ExtentComponent;\n            if (alien.visible && rocketExtent.intersects(alienExtent)) {\n                alien.visible = false;\n                rocketPos.dy = -10;\n                rocket.visible = false;\n                this.state.player.score += alien.points;\n                // initiate explosion\n                alien.exploding = true;\n                alien.explosionFrameCount = performance.now();\n            }\n        });\n    }\n\n    private rocketsSaucers(rocket: PlayerRocketComponent,\n                           rocketPos: PositionComponent,\n                           rocketExtent: ExtentComponent) {\n        const alien = this.saucer.components.get(AlienSaucerImgComponent.name) as AlienSaucerImgComponent;\n        const alienExtent = this.saucer.components.get(ExtentComponent.name) as ExtentComponent;\n        if (alien.visible && rocketExtent.intersects(alienExtent)) {\n            alien.visible = false;\n            alien.startTime = performance.now();\n            rocketPos.dy = -10;\n            rocket.visible = false;\n            this.state.player.score += alien.points;\n            // initiate explosion\n            alien.exploding = true;\n            alien.explosionFrameCount = performance.now();\n        }\n    }\n\n    private rocketsRockets(rocket: PlayerRocketComponent,\n                           rocketExtent: ExtentComponent) {\n        this.alienRockets.forEach((inner: Entity) => {\n            const alienRocket = inner.components.get(AlienRocketComponent.name) as AlienRocketComponent;\n            const alienRocketExtent = inner.components.get(ExtentComponent.name) as ExtentComponent;\n            if (alienRocket.visible && rocketExtent.intersects(alienRocketExtent)) {\n                alienRocket.visible = false;\n                rocket.visible = false;\n            }\n        });\n    }\n\n    private rocketsShields(rocket: PlayerRocketComponent | AlienRocketComponent,\n                           rocketExtent: ExtentComponent): void {\n        this.shields.forEach((inner: Entity) => {\n            const shield = inner.components.get(ShieldComponent.name) as ShieldComponent;\n            const shieldExtent = inner.components.get(ExtentComponent.name) as ExtentComponent;\n            if (shield.visible && rocketExtent.intersects(shieldExtent)) {\n                this.shieldDecay(shield);\n                rocket.visible = false;\n                // initiate explosion\n                rocket.exploding = true;\n                rocket.explosionFrameCount = performance.now();\n            }\n        });\n    }\n\n    private rocketsCeiling(rocket: PlayerRocketComponent,\n                           rocketExtent: ExtentComponent): void {\n        const ceilingExtent = this.ceiling.components.get(ExtentComponent.name) as ExtentComponent;\n        if (rocketExtent.intersects(ceilingExtent)) {\n            rocket.visible = false;\n            // initiate explosion\n            rocket.exploding = true;\n            rocket.explosionFrameCount = performance.now();\n        }\n    }\n\n    private rocketsFloor(rocket: AlienRocketComponent,\n                         rocketExtent: ExtentComponent) {\n        const finishExtent = this.floor.components.get(ExtentComponent.name) as ExtentComponent;\n        if (rocketExtent.intersects(finishExtent)) {\n            rocket.visible = false;\n            // initiate explosion\n            rocket.exploding = true;\n            rocket.explosionFrameCount = performance.now();\n        }\n    }\n\n    private shieldDecay(shield: ShieldComponent) {\n        switch (shield.hits) {\n            case 5:\n                shield.setImageTwo();\n                shield.hits = 4;\n                break;\n            case 4:\n                shield.setImageThree();\n                shield.hits = 3;\n                break;\n            case 3:\n                shield.setImageFour();\n                shield.hits = 2;\n                break;\n            case 2:\n                shield.setImageFive()\n                shield.hits = 1;\n                break;\n            case 1:\n                shield.visible = false;\n                shield.setImageOne();\n                shield.hits = 5;\n                break;\n        }\n    }\n\n    private resetRockets() {\n        // Reset all alien rockets\n        this.alienRockets.forEach((entity: Entity) => {\n            const rocket = entity.components.get(AlienRocketComponent.name) as AlienRocketComponent;\n            rocket.visible = false;\n            rocket.triggerTime = performance.now();\n        });\n        // Reset all player rockets\n        this.playerRockets.forEach((entity: Entity) => {\n            const rocket = entity.components.get(PlayerRocketComponent.name) as PlayerRocketComponent;\n            rocket.visible = false;\n        });\n    }\n}\n","import {System} from \"./system\";\nimport {Entity} from \"../entities/entity\";\nimport {AlienSaucerImgComponent} from \"../components/aliens/alien-saucer-img-component\";\nimport {PositionComponent} from \"../components/position-component\";\nimport {ExtentComponent} from \"../components/extent-component\";\nimport {AlienImgComponent} from \"../components/aliens/alien-img-component\";\nimport {ShieldComponent} from \"../components/shield-component\";\nimport {AlienRocketComponent} from \"../components/aliens/alien-rocket-component\";\nimport {PlayerRocketComponent} from \"../components/player/player-rocket-component\";\nimport {PlayerEntity} from \"../entities/player-entity\";\nimport {PlayerRocketEntities} from \"../entities/player-rocket-entities\";\nimport {AlienRocketsEntities} from \"../entities/alien-rockets-entities\";\nimport {ShieldEntity} from \"../entities/shield-entities\";\nimport {AlienEntities} from \"../entities/alien-entities\";\nimport {AlienSaucerEntity} from \"../entities/alien-saucer-entity\";\nimport {FinishLineEntity} from \"../entities/finish-line-entity\";\nimport {GameSettings} from \"../../game-settings\";\nimport {GameState} from \"../../game-state\";\n\nexport class GameLogicSystem implements System {\n\n    private player: Entity;\n    private playerRockets: Entity[];\n    private alienRockets: Entity[];\n    private shields: Entity[];\n    private aliens: Entity[];\n    private saucer: Entity;\n    private finishLine: Entity;\n\n    private settings: GameSettings;\n    private state: GameState;\n\n    constructor(entities: Map<string, Entity[]>, settings: GameSettings, state: GameState) {\n        this.player = entities.get(PlayerEntity.name)![0];\n        this.playerRockets = entities.get(PlayerRocketEntities.name)!;\n        this.alienRockets = entities.get(AlienRocketsEntities.name)!;\n        this.shields = entities.get(ShieldEntity.name)!;\n        this.aliens = entities.get(AlienEntities.name)!;\n        this.saucer = entities.get(AlienSaucerEntity.name)![0];\n        this.finishLine = entities.get(FinishLineEntity.name)![0];\n        this.settings = settings;\n        this.state = state;\n    }\n\n    process(): void {\n\n        // Saucer logic\n        let startTime = performance.now();\n        const aliens = this.aliens.filter(entity => {\n            const alien = entity.components.get(AlienImgComponent.name) as AlienImgComponent;\n            return alien.visible;\n        });\n        // If less then 9 aliens than the saucer may start appearing\n        if (aliens.length < 9) {\n            const components = this.saucer.components;\n            const img = components.get(AlienSaucerImgComponent.name) as AlienSaucerImgComponent;\n            const pos = components.get(PositionComponent.name) as PositionComponent;\n            if (!img.visible) {\n                if (startTime - img.startTime >= this.settings.saucerStartDelay) {\n                    img.setMoveDirection();\n                    img.setImageOne();\n                    img.visible = true;\n                    img.startTime = performance.now();\n                    if (img.moveRight) {\n                        pos.dx = 0 - img.dWidth;\n                    } else {\n                        pos.dx = this.settings.relativeWidth + img.dWidth;\n                    }\n                }\n            }\n        }\n\n        // Game end logic\n        // Aliens land\n        const extent = this.finishLine.components.get(ExtentComponent.name) as ExtentComponent;\n        this.aliens.forEach((inner: Entity) => {\n            const alien = inner.components.get(AlienImgComponent.name) as AlienImgComponent;\n            const alienExtent = inner.components.get(ExtentComponent.name) as ExtentComponent;\n            if (alien.visible && extent.intersects(alienExtent)) {\n                this.state.game.end = true;\n            }\n        });\n\n        // Player clears level\n        this.playerClearsLevel();\n    }\n\n    private playerClearsLevel(): void {\n        const aliens: Entity[] = this.aliens.filter(entity => {\n            const alien = entity.components.get(AlienImgComponent.name) as AlienImgComponent;\n            return alien.visible;\n        });\n        // Aliens respawn, shields respawn, reset rockets, player set in start position.\n        if (aliens.length === 0) {\n            const playerPos = this.player.components.get(PositionComponent.name) as PositionComponent;\n            playerPos.reset();\n            this.state.game.level += 1;\n            this.state.game.nextLevel = true;\n\n            this.alienRockets.forEach((entity: Entity) => {\n                const rockets = entity.components.get(AlienRocketComponent.name) as AlienRocketComponent;\n                const pos = entity.components.get(PositionComponent.name) as PositionComponent;\n                rockets.reset();\n                pos.reset();\n            });\n\n            const saucer = this.saucer.components.get(AlienSaucerImgComponent.name) as AlienSaucerImgComponent;\n            saucer.visible = false;\n\n            this.aliens.forEach((entity: Entity) => {\n                const alien = entity.components.get(AlienImgComponent.name) as AlienImgComponent;\n                const pos = entity.components.get(PositionComponent.name) as PositionComponent;\n                alien.reset();\n                pos.reset();\n                switch (this.state.game.level) {\n                    case 2:\n                    case 3:\n                    case 4:\n                        pos.dy += 32;\n                        break;\n                    case 5:\n                    case 6:\n                    case 7:\n                        pos.dy += 64;\n                        break;\n                }\n            });\n\n            this.shields.forEach((entity: Entity) => {\n                const shield = entity.components.get(ShieldComponent.name) as ShieldComponent;\n                const pos = entity.components.get(PositionComponent.name) as PositionComponent;\n                shield.reset();\n                pos.reset();\n            });\n\n            this.playerRockets.forEach((entity: Entity) => {\n                const rockets = entity.components.get(PlayerRocketComponent.name) as PlayerRocketComponent;\n                const pos = entity.components.get(PositionComponent.name) as PositionComponent;\n                rockets.reset();\n                pos.reset();\n            });\n        }\n    }\n\n}\n","import {System} from \"./system\";\nimport {Entity} from \"../entities/entity\";\nimport {AlienImgComponent} from \"../components/aliens/alien-img-component\";\nimport {PositionComponent} from \"../components/position-component\";\nimport {PlayerRocketComponent} from \"../components/player/player-rocket-component\";\nimport {PlayerComponent} from \"../components/player/player-component\";\nimport {AlienRocketComponent} from \"../components/aliens/alien-rocket-component\";\nimport {AlienSaucerImgComponent} from \"../components/aliens/alien-saucer-img-component\";\nimport {ExtentComponent} from \"../components/extent-component\";\nimport {PlayerEntity} from \"../entities/player-entity\";\nimport {AlienEntities} from \"../entities/alien-entities\";\nimport {AlienRocketsEntities} from \"../entities/alien-rockets-entities\";\nimport {PlayerRocketEntities} from \"../entities/player-rocket-entities\";\nimport {AlienSaucerEntity} from \"../entities/alien-saucer-entity\";\nimport {GameSettings} from \"../../game-settings\";\n\nexport class MotionSystem implements System {\n\n    private player: Entity;\n    private aliens: Entity[];\n    private alienRockets: Entity[];\n    private playerRockets: Entity[];\n    private saucer: Entity;\n    private settings: GameSettings;\n\n    constructor(entities: Map<string, Entity[]>, settings: GameSettings) {\n        this.aliens = entities.get(AlienEntities.name)!;\n        this.alienRockets = entities.get(AlienRocketsEntities.name)!;\n        this.player = entities.get(PlayerEntity.name)![0];\n        this.playerRockets = entities.get(PlayerRocketEntities.name)!;\n        this.saucer = entities.get(AlienSaucerEntity.name)![0];\n        this.settings = settings;\n    }\n\n    process(): void {\n        this.updateAlienSpeed();\n        this.updateAlienMoveDirection();\n        this.updateAliensPosition();\n        this.updateAlienRocketPosition()\n        this.updatePlayerPosition();\n        this.updatePlayerRocketsPosition();\n        this.updateSaucerPosition();\n    }\n\n    // If less then X aliens up the speed, for now less than 9\n    private updateAlienSpeed() {\n        const aliens = this.aliens.filter(entity => {\n            const alien = entity.components.get(AlienImgComponent.name) as AlienImgComponent;\n            return alien.visible;\n        });\n        if (aliens.length === 8) {\n            this.settings.aliens.moveDelay = 250;\n        }\n        if (aliens.length === 2) {\n            this.settings.aliens.moveDelay = 200;\n        }\n        if (aliens.length === 1) {\n            this.settings.aliens.moveDelay = 100;\n        }\n    }\n\n    private updateAlienMoveDirection(): void {\n        // Get Aliens BoundingBox\n        let maxX = 0;\n        let maxY = 0;\n        let minX = this.settings.relativeWidth;\n        let minY = this.settings.relativeHeight;\n        const padding = 10;\n        this.aliens.forEach(entity => {\n            const components = entity.components;\n            const img = components.get(AlienImgComponent.name) as AlienImgComponent;\n            const pos = components.get(PositionComponent.name) as PositionComponent;\n            if (img.visible) {\n                maxX = maxX < pos.dx + img.dWidth + padding ? pos.dx + img.dWidth + padding : maxX;\n                maxY = maxY < pos.dy + img.dHeight ? pos.dy + img.dHeight : maxY;\n                minX = minX > pos.dx ? pos.dx - padding : minX;\n                minY = minY > pos.dy ? pos.dy : minY;\n            }\n        });\n\n        // Aliens move direction\n        this.aliens.forEach(entity => {\n            const components = entity.components;\n            const img = components.get(AlienImgComponent.name) as AlienImgComponent;\n            if (img.moveRight) {\n                if (maxX < 224) {\n                    img.moveRight = true;\n                } else {\n                    img.moveRight = false;\n                    img.moveLeft = true;\n                    img.moveDown = true;\n                }\n            }\n            if (img.moveLeft) {\n                if (minX > 0) {\n                    img.moveLeft = true;\n                } else {\n                    img.moveLeft = false;\n                    img.moveRight = true;\n                    img.moveDown = true;\n                }\n            }\n        });\n    }\n\n    private updateAliensPosition(): void {\n        // Update Aliens position\n        let startTime = performance.now();\n        this.aliens.forEach(entity => {\n            const components = entity.components;\n            const img = components.get(AlienImgComponent.name) as AlienImgComponent;\n            const pos = components.get(PositionComponent.name) as PositionComponent;\n            const extent = components.get(ExtentComponent.name) as ExtentComponent;\n            if (startTime - img.startTime >= this.settings.aliens.moveDelay) {\n                if (img.moveDown) {\n                    pos.dy += 5;\n                    img.moveDown = false;\n                } else if (img.moveRight) {\n                    pos.dx += 5;\n                } else if (img.moveLeft) {\n                    pos.dx -= 5;\n                }\n            }\n            extent.setExtent(pos.dx, img.dWidth, pos.dy, img.dHeight);\n        });\n\n        // Reset Aliens startTime\n        startTime = performance.now();\n        this.aliens.forEach(entity => {\n            const components = entity.components;\n            const img = components.get(AlienImgComponent.name) as AlienImgComponent;\n            if (startTime - img.startTime >= this.settings.aliens.moveDelay) {\n                img.startTime = startTime;\n            }\n        });\n    }\n\n    private updateAlienRocketPosition() {\n        this.alienRockets.forEach(entity => {\n            const components = entity.components;\n            const img = components.get(AlienRocketComponent.name) as AlienRocketComponent;\n            const pos = components.get(PositionComponent.name) as PositionComponent;\n            const rocketExtent = components.get(ExtentComponent.name) as ExtentComponent;\n            if (img.visible) {\n                if (pos.dy < 256 - 23) {\n                    pos.dy += 1;\n                } else {\n                    pos.dy = -10;\n                    img.visible = false;\n                }\n            }\n            if(!img.visible && !img.exploding) {\n                pos.dy = -10;\n            }\n            rocketExtent.setExtent(pos.dx, img.dWidth, pos.dy, img.dHeight);\n        });\n    }\n\n    private updatePlayerPosition(): void {\n        const components = this.player.components;\n        const pl = components.get(PlayerComponent.name) as PlayerComponent;\n        const plPos = components.get(PositionComponent.name) as PositionComponent;\n        const plExtent = components.get(ExtentComponent.name) as ExtentComponent;\n        if (pl.rightPressed && plPos.dx + pl.dWidth < 224) {\n            plPos.dx += 2;\n        } else {\n            pl.rightPressed = false;\n        }\n        if (pl.leftPressed && plPos.dx > 0) {\n            plPos.dx -= 2;\n        } else {\n            pl.leftPressed = false;\n        }\n        plExtent.setExtent(plPos.dx, pl.dWidth, plPos.dy, pl.dHeight);\n    }\n\n    private updatePlayerRocketsPosition(): void {\n        // Update Player Rockets position\n        this.playerRockets.forEach(entity => {\n            const components = entity.components;\n            const rocket = components.get(PlayerRocketComponent.name) as PlayerRocketComponent;\n            const rocketPos = components.get(PositionComponent.name) as PositionComponent;\n            const rocketExtent = components.get(ExtentComponent.name) as ExtentComponent;\n            if (rocket.visible) {\n                if (rocketPos.dy > 23) {\n                    rocketPos.dy -= 2;\n                } else {\n                    rocketPos.dy = -10;\n                    rocket.visible = false;\n                }\n            }\n            if(!rocket.visible && !rocket.exploding) {\n                rocketPos.dy = -10;\n            }\n\n            rocketExtent.setExtent(rocketPos.dx, rocket.dWidth, rocketPos.dy, rocket.dHeight);\n        });\n    }\n\n    private updateSaucerPosition(): void {\n        const components = this.saucer.components;\n        const img = components.get(AlienSaucerImgComponent.name) as AlienSaucerImgComponent;\n        const pos = components.get(PositionComponent.name) as PositionComponent;\n        const extent = components.get(ExtentComponent.name) as ExtentComponent;\n        if (img.visible) {\n            if (img.moveRight && pos.dx > 224) {\n                pos.dx = 0 - img.dWidth;\n                img.startTime = performance.now();\n                img.visible = false;\n            } else if (!img.moveRight && pos.dx < 0) {\n                pos.dx = 224 + img.dWidth;\n                img.startTime = performance.now();\n                img.visible = false;\n            } else if (img.moveRight) {\n                pos.dx += 1;\n            } else {\n                pos.dx -= 1;\n            }\n            extent.setExtent(pos.dx, img.dWidth, pos.dy, img.dHeight);\n        }\n    }\n\n}\n","import {Entity} from \"../entities/entity\";\nimport {System} from \"./system\";\nimport {PositionComponent} from \"../components/position-component\";\nimport {AlienImgComponent} from \"../components/aliens/alien-img-component\";\nimport {ShieldComponent} from \"../components/shield-component\";\nimport {PlayerComponent} from \"../components/player/player-component\";\nimport {PlayerRocketComponent} from \"../components/player/player-rocket-component\";\nimport {AlienRocketComponent} from \"../components/aliens/alien-rocket-component\";\nimport {AlienSaucerImgComponent} from \"../components/aliens/alien-saucer-img-component\";\nimport {ExtentComponent} from \"../components/extent-component\";\nimport {ImageComponent} from \"../components/image-component\";\nimport {PlayerEntity} from \"../entities/player-entity\";\nimport {PlayerRocketEntities} from \"../entities/player-rocket-entities\";\nimport {AlienSaucerEntity} from \"../entities/alien-saucer-entity\";\nimport {AlienEntities} from \"../entities/alien-entities\";\nimport {AlienRocketsEntities} from \"../entities/alien-rockets-entities\";\nimport {ShieldEntity} from \"../entities/shield-entities\";\nimport {GameState} from \"../../game-state\";\nimport {GameSettings} from \"../../game-settings\";\n\nexport class RenderSystem implements System {\n\n    private ctx: CanvasRenderingContext2D;\n    private alienFrameCount = performance.now();\n    private alienRocketsFrameCount = performance.now();\n    private entities: Map<string, Entity[]>;\n    private player: Entity;\n    private playerRockets: Entity[];\n    private saucer: Entity;\n    private aliens: Entity[];\n    private alienRockets: Entity[];\n    private shields: Entity[];\n    private state: GameState;\n    private settings: GameSettings;\n\n    constructor(canvas: HTMLCanvasElement, entities: Map<string, Entity[]>, state: GameState, settings: GameSettings) {\n        this.ctx = canvas.getContext(\"2d\")!;\n        this.entities = entities;\n        this.player = entities.get(PlayerEntity.name)![0];\n        this.playerRockets = entities.get(PlayerRocketEntities.name)!;\n        this.saucer = entities.get(AlienSaucerEntity.name)![0];\n        this.aliens = entities.get(AlienEntities.name)!;\n        this.alienRockets = entities.get(AlienRocketsEntities.name)!;\n        this.shields = entities.get(ShieldEntity.name)!;\n        this.state = state;\n        this.settings = settings;\n    }\n\n    process(): void {\n        const components = this.player.components;\n\n        // Player\n        const plImg = components.get(PlayerComponent.name) as PlayerComponent;\n        const plPos = components.get(PositionComponent.name) as PositionComponent;\n        if (this.state.player.alive) {\n            this.drawImage(plImg, plPos);\n        }\n        if (plImg.exploding) {\n            if (performance.now() - plImg.explosionFrameCount <= this.settings.explosionDelay) {\n                plImg.setExplode();\n                const customPos = Object.create(plPos);\n                customPos.dx -= 2;\n                this.drawImage(plImg, customPos);\n            } else {\n                plImg.reset();\n                plPos.reset();\n            }\n        }\n\n        // Player rockets\n        this.playerRockets.forEach(entity => {\n            const components = entity.components;\n            const img = components.get(PlayerRocketComponent.name) as PlayerRocketComponent;\n            const pos = components.get(PositionComponent.name) as PositionComponent;\n            if (img.visible) {\n                img.setImageOne();\n                this.drawImage(img, pos);\n            }\n            if (img.exploding) {\n                if (performance.now() - img.explosionFrameCount <= this.settings.explosionDelay) {\n                    img.setExplode();\n                    const customPos = Object.create(pos);\n                    customPos.dx -= 4;\n                    this.drawImage(img, customPos);\n                } else {\n                    img.reset()\n                }\n            }\n        });\n\n        // Saucer\n        const img = this.saucer.components.get(AlienSaucerImgComponent.name) as AlienSaucerImgComponent;\n        const pos = this.saucer.components.get(PositionComponent.name) as PositionComponent;\n        if (img.visible) {\n            this.drawImage(img, pos);\n        }\n        if (img.exploding) {\n            if (performance.now() - img.explosionFrameCount <= this.settings.explosionDelay) {\n                img.setExplode();\n                const customPos = Object.create(pos);\n                customPos.dx -= 3;\n                this.drawImage(img, customPos);\n            } else {\n                img.reset();\n            }\n        }\n\n        // Aliens\n        this.aliens.forEach(entity => {\n            const components = entity.components;\n            const img = components.get(AlienImgComponent.name) as AlienImgComponent;\n            const pos = components.get(PositionComponent.name) as PositionComponent;\n            if (img.visible) {\n                if (performance.now() - this.alienFrameCount <= this.settings.aliens.moveDelay) {\n                    img.setImageOne();\n                } else if (performance.now() - this.alienFrameCount <= this.settings.aliens.moveDelay * 2) {\n                    img.setImageTwo();\n                } else {\n                    img.setImageOne();\n                    this.alienFrameCount = performance.now();\n                }\n                this.drawImage(img, pos);\n            }\n            if (img.exploding) {\n                if (performance.now() - img.explosionFrameCount <= this.settings.explosionDelay) {\n                    img.setExplode();\n                    this.drawImage(img, pos);\n                } else {\n                    img.exploding = false;\n                    this.alienFrameCount = performance.now();\n                }\n            }\n        });\n\n        // Alien Rockets\n        this.alienRockets.forEach(entity => {\n            const components = entity.components;\n            const img = components.get(AlienRocketComponent.name) as AlienRocketComponent;\n            const pos = components.get(PositionComponent.name) as PositionComponent;\n            if (img.visible) {\n                if (performance.now() - this.alienRocketsFrameCount <= 150) {\n                    img.setImageOne();\n                } else if (performance.now() - this.alienRocketsFrameCount <= 300) {\n                    img.setImageTwo();\n                } else if (performance.now() - this.alienRocketsFrameCount <= 450) {\n                    img.setImageThree();\n                } else if (performance.now() - this.alienRocketsFrameCount <= 600) {\n                    img.setImageFour();\n                } else {\n                    img.setImageOne();\n                    this.alienRocketsFrameCount = performance.now();\n                }\n                this.drawImage(img, pos);\n            }\n            if (img.exploding) {\n                if (performance.now() - img.explosionFrameCount <= this.settings.explosionDelay) {\n                    img.setExplode();\n                    const customPos = Object.create(pos);\n                    customPos.dx -= 3;\n                    this.drawImage(img, customPos);\n                } else {\n                    img.exploding = false;\n                    this.alienRocketsFrameCount = performance.now();\n                }\n            }\n        });\n\n        // Shields\n        this.shields.forEach(entity => {\n            const components = entity.components;\n            const img = components.get(ShieldComponent.name) as ShieldComponent;\n            const pos = components.get(PositionComponent.name) as PositionComponent;\n            if (img.visible) {\n                this.drawImage(img, pos);\n            }\n        });\n\n        // Draw Extent\n        if (this.settings.extent.debug) {\n            this.entities.forEach((value: Entity[], key, map) => {\n                value.forEach((entity: Entity) => {\n                    const components = entity.components;\n                    if (components.has(ExtentComponent.name)) {\n                        const extent = components.get(ExtentComponent.name) as ExtentComponent;\n                        this.ctx.strokeStyle = 'rgb(255, 0, 0)';\n                        this.ctx.strokeRect(extent.minx, extent.maxy, extent.maxx - extent.minx, extent.miny - extent.maxy);\n                    }\n                });\n            });\n        }\n    }\n\n    private drawImage(img: ImageComponent, pos: PositionComponent) {\n        this.ctx.drawImage(img.img,\n            img.sx, img.sy, img.sWidth, img.sHeight,\n            pos.dx, pos.dy, img.dWidth, img.dHeight);\n    }\n}\n","import {System} from \"./system\";\nimport {Entity} from \"../entities/entity\";\nimport {PositionComponent} from \"../components/position-component\";\nimport {PlayerComponent} from \"../components/player/player-component\";\nimport {PlayerRocketComponent} from \"../components/player/player-rocket-component\";\nimport {PlayerEntity} from \"../entities/player-entity\";\nimport {PlayerRocketEntities} from \"../entities/player-rocket-entities\";\nimport {ExtentComponent} from \"../components/extent-component\";\nimport {GameSettings} from \"../../game-settings\";\n\nexport class UserInputSystem implements System {\n\n    private plRocketEntities: Entity[] = [];\n    private pl: PlayerComponent;\n    private plPos: PositionComponent;\n    private settings: GameSettings;\n\n    constructor(entities: Map<string, Entity[]>, settings: GameSettings) {\n        this.settings = settings;\n        const player = entities.get(PlayerEntity.name)![0];\n        this.pl = player.components.get(PlayerComponent.name) as PlayerComponent;\n        this.plPos = player.components.get(PositionComponent.name) as PositionComponent;\n        this.plRocketEntities = entities.get(PlayerRocketEntities.name)!;\n    }\n\n    process(): void {\n\n        if (this.pl.fireRocket) {\n            // Filter not visible\n            const notVisibleRockets = this.plRocketEntities.filter(entity => {\n                const plRocket = entity.components.get(PlayerRocketComponent.name) as PlayerRocketComponent;\n                return !plRocket.visible;\n            });\n\n            // Filter visible and sort by latest triggerTime\n            const visibleRockets = this.plRocketEntities.filter(entity => {\n                const plRocket = entity.components.get(PlayerRocketComponent.name) as PlayerRocketComponent;\n                return plRocket.visible;\n            }).sort((a, b) => {\n                const left = a.components.get(PlayerRocketComponent.name) as PlayerRocketComponent;\n                const right = b.components.get(PlayerRocketComponent.name) as PlayerRocketComponent;\n                return right.triggerTime - left.triggerTime;\n            });\n\n            // If none visible, fire first rocket\n            if (notVisibleRockets.length === 3) {\n                this.setRocketVisible(notVisibleRockets[0]);\n            }\n            // If visible rockets less than 3, Fire next rocket with a minimum time difference from latest visible rocket\n            else if (visibleRockets.length < 3) {\n                const plRocketVisible = visibleRockets[0].components.get(PlayerRocketComponent.name) as PlayerRocketComponent;\n                if (performance.now() - plRocketVisible.triggerTime > this.settings.player.fireDelay) {\n                    this.setRocketVisible(notVisibleRockets[0]);\n                }\n            }\n        }\n    }\n\n    private setRocketVisible(entity: Entity): void {\n        const plRocket = entity.components.get(PlayerRocketComponent.name) as PlayerRocketComponent;\n        const plRocketPos = entity.components.get(PositionComponent.name) as PositionComponent;\n        const plRocketExtent = entity.components.get(ExtentComponent.name) as ExtentComponent;\n        plRocket.visible = true;\n        plRocket.exploding = false;\n        plRocket.triggerTime = performance.now();\n        plRocketPos.dx = this.plPos.dx + this.pl.dWidth / 2;\n        plRocketPos.dy = this.plPos.dy - this.pl.dHeight / 2;\n        plRocketExtent.setExtent(plRocketPos.dx, plRocket.dWidth, plRocketPos.dy, plRocket.dHeight);\n    }\n}\n","export class GameSettings {\n\n    relativeWidth = 224;\n    relativeHeight = 256;\n\n    lastRender = 0;\n    lastTick = 0;\n    tickLength = 100; // 10 fps = 100ms, 50 fps = 20ms\n\n    explosionDelay = 150;\n    saucerStartDelay = 10000;\n\n    aliens = {\n        moveDelay: 500,\n        fireDelay: 1500,\n    };\n\n    player = {\n        fireDelay: 500,\n    };\n\n    extent = {\n        debug: false,\n    };\n\n    renderNext(tick: number): boolean {\n        return tick - this.lastTick > this.tickLength;\n    }\n}\n","export class GameState {\n\n    // Overall game state\n    game = {\n        intro: true,\n        start: false,\n        respawn: false,\n        running: false,\n        end: false,\n        hiScore: false,\n        nextLevel: false,\n        level: 1,\n    };\n\n    player = {\n        alive: true,\n        score: 0,\n        highScore: 0,\n        lives: 2,\n    };\n\n}\n","import {System} from \"./domain/systems/system\";\nimport {Entity} from \"./domain/entities/entity\";\nimport {Systems} from \"./domain/systems\";\nimport {Entities} from \"./domain/entities\";\nimport {GameState} from \"./game-state\";\nimport {GameSettings} from \"./game-settings\";\nimport {Intro} from \"./domain/pages/intro\";\nimport {PlayerComponent} from \"./domain/components/player/player-component\";\nimport {Respawn} from \"./domain/pages/respawn\";\nimport {End} from \"./domain/pages/end\";\nimport {HighScores} from \"./high-scores\";\n\nexport class Game {\n\n    state: GameState = new GameState();\n    settings: GameSettings = new GameSettings();\n\n    canvasGame: HTMLCanvasElement;\n    canvases: HTMLCanvasElement[] = [];\n    systems: System[] = [];\n    intro: Intro;\n    respawn: Respawn;\n    end: End;\n\n    entities: Map<string, Entity[]> = new Map();\n\n    private readonly introEventListener: (e: KeyboardEvent) => void;\n    private readonly respawnEventListener: (e: KeyboardEvent) => void;\n    private readonly gameEventListenerKeyDown: (e: KeyboardEvent) => void;\n    private readonly gameEventListenerKeyUp: (e: KeyboardEvent) => void;\n    private readonly hiScoreEventListenerClick: (e: MouseEvent) => void;\n    private readonly saveHiScoreClick: (e: MouseEvent) => void;\n    // private readonly restartGameClick: (e: MouseEvent) => void;\n\n    constructor() {\n        this.settings.lastTick = performance.now();\n        const container = document.createElement('div');\n        container.id = 'container';\n        document.body.appendChild(container);\n        this.canvasGame = document.createElement('canvas');\n        this.canvasGame.id = 'game';\n        container.appendChild(this.canvasGame);\n        this.canvases.push(this.canvasGame);\n\n        addEventListener(\"DOMContentLoaded\", () => {\n            this.setAspectRatioToUse();\n        });\n        addEventListener(\"resize\", () => {\n            this.setAspectRatioToUse();\n        });\n\n        this.introEventListener = (e: KeyboardEvent) => this.introKeyDownEvent(e);\n        this.respawnEventListener = (e: KeyboardEvent) => this.respawnKeyDownEvent(e);\n        this.gameEventListenerKeyDown = (e: KeyboardEvent) => this.keyDownHandler(e);\n        this.gameEventListenerKeyUp = (e: KeyboardEvent) => this.keyUpHandler(e);\n        this.hiScoreEventListenerClick = (e: MouseEvent) => this.clickHighScore(e);\n        this.saveHiScoreClick = (e: MouseEvent) => this.saveHiScore(e);\n        // this.restartGameClick = (e: MouseEvent) => this.restartGame(e);\n\n        // Create entities ---------------------------------------------------\n        const entities = new Entities(this.canvasGame);\n        this.entities = entities.getEntities();\n\n        // Setup systems ------------------------------------------------------\n        const systems = new Systems(this.entities, this.settings, this.state);\n        this.systems = systems.getSystems(this.canvasGame);\n\n        this.intro = new Intro(this.state, this.settings);\n        this.respawn = new Respawn(this.state, this.settings);\n        this.end = new End(this.state, this.settings);\n\n        // Start Game --------------------------------------------------------\n        this.init();\n    }\n\n    private setAspectRatioToUse(): void {\n        const body = this.canvasGame.parentElement as HTMLBodyElement;\n\n        const aspectRatioWidth = Math.floor(body.clientWidth / this.settings.relativeWidth);\n        const aspectRatioHeight = Math.floor(body.clientHeight / this.settings.relativeHeight);\n        const aspectRatio = (aspectRatioHeight < aspectRatioWidth) ? aspectRatioHeight : aspectRatioWidth;\n\n        this.canvases.forEach(canvas => {\n            canvas.width = this.settings.relativeWidth * aspectRatio;\n            canvas.height = this.settings.relativeHeight * aspectRatio;\n            const ctx = canvas.getContext('2d')!;\n            ctx.setTransform(aspectRatio, 0, 0, aspectRatio, 0, 0);\n            ctx.save();\n        });\n    }\n\n    init() {\n        addEventListener('keydown', this.introEventListener, false);\n        this.gameLoop();\n    }\n\n    gameLoop(): void {\n\n        if (this.state.game.intro) {\n            this.settings.tickLength = 20;\n            const time = performance.now();\n            if (this.settings.renderNext(time)) {\n                this.settings.lastTick = time;\n                this.intro.process();\n            }\n        }\n\n        if (this.state.game.start) {\n            addEventListener('keydown', this.gameEventListenerKeyDown, false);\n            addEventListener('keyup', this.gameEventListenerKeyUp, false);\n            this.state.game.running = true;\n            this.state.game.start = false;\n        }\n\n        if (this.state.game.respawn) {\n            this.settings.tickLength = 20;\n            const time = performance.now();\n            if (this.settings.renderNext(time)) {\n                this.settings.lastTick = time;\n                this.respawn.process();\n            }\n        }\n\n        if (this.state.game.end) {\n            this.settings.tickLength = 20;\n            if (this.settings.renderNext(performance.now())) {\n                removeEventListener('keydown', this.gameEventListenerKeyDown, false);\n                removeEventListener('keyup', this.gameEventListenerKeyUp, false);\n                this.state.game.running = false;\n                this.settings.lastTick = performance.now();\n                this.checkForHighScore();\n                if (this.state.game.hiScore && !document.getElementById('hi-score')) {\n                    addEventListener('click', this.hiScoreEventListenerClick, false);\n                } else if (!this.state.game.hiScore && !document.getElementById('hi-score')) {\n                    // addEventListener('click', this.restartGameClick, false);\n                }\n                this.end.process();\n            }\n        }\n\n        if (this.state.game.nextLevel) {\n            // console.log('nextLevel', this.state.game);\n            this.state.game.nextLevel = false;\n            this.state.game.running = false;\n\n            // console.log(\"You won!\");\n            // console.log(\"Score:\", this.state.player.score);\n            // console.log(\"Next level:\", this.state.game.level);\n            this.settings.aliens.moveDelay = 500;\n            this.state.game.running = true;\n        }\n\n        if (!this.state.player.alive && !this.state.game.end) {\n            removeEventListener('keydown', this.gameEventListenerKeyDown, false);\n            removeEventListener('keyup', this.gameEventListenerKeyUp, false);\n            this.state.game.running = false;\n            if (this.state.player.lives > -1) {\n                addEventListener('keydown', this.respawnEventListener, false);\n                this.state.player.alive = true;\n                this.state.game.respawn = true;\n            } else if (!this.state.game.intro) {\n                this.state.game.end = true;\n            }\n        }\n\n        if (this.state.game.running) {\n            this.settings.tickLength = 50;\n            // Loop through the systems. NOTE: order of the systems can influence the game.\n            if (this.settings.renderNext(performance.now())) {\n                this.systems.forEach(system => {\n                    system.process();\n                });\n            }\n        }\n\n        requestAnimationFrame(() => this.gameLoop());\n    }\n\n    private keyDownHandler(e: KeyboardEvent) {\n        const pl = this.entities.get('PlayerEntity')![0].components.get('PlayerComponent') as PlayerComponent;\n        if (e.key === 'Right' || e.key === 'ArrowRight' || e.key === 'd') {\n            pl.rightPressed = true;\n        } else if (e.key === 'Left' || e.key === 'ArrowLeft' || e.key === 'a') {\n            pl.leftPressed = true;\n        }\n\n        if (e.key === ' ') {\n            pl.fireRocket = true;\n        }\n    }\n\n    private keyUpHandler(e: KeyboardEvent) {\n        const pl = this.entities.get('PlayerEntity')![0].components.get('PlayerComponent') as PlayerComponent;\n        if (e.key === 'Right' || e.key === 'ArrowRight' || e.key === 'd') {\n            pl.rightPressed = false;\n        } else if (e.key === 'Left' || e.key === 'ArrowLeft' || e.key === 'a') {\n            pl.leftPressed = false;\n        }\n\n        if (e.key === ' ') {\n            pl.fireRocket = false;\n        }\n    }\n\n    private introKeyDownEvent(e: KeyboardEvent) {\n        if (e.key === ' ') {\n            this.state.game.start = true;\n            this.state.game.end = false;\n            this.state.game.intro = false;\n            this.state.player.alive = true;\n            this.state.game.level = 1;\n            this.state.player.lives = 2;\n            // console.log('introKeyDownEvent', this.state.game);\n            removeEventListener('keydown', this.introEventListener, false);\n        }\n    }\n\n    private respawnKeyDownEvent(e: KeyboardEvent) {\n        if (e.key === ' ') {\n            this.state.game.start = true;\n            this.state.game.respawn = false;\n            removeEventListener('keydown', this.respawnEventListener, false);\n        }\n    }\n\n    private clickHighScore(e: MouseEvent) {\n        this.state.game.hiScore = false;\n        const container = document.getElementById('container')!;\n        const div = document.createElement('div');\n        div.id = 'hi-score';\n        div.appendChild(document.createElement('input'));\n        const button = document.createElement('button');\n        button.id = 'save';\n        button.textContent = 'Save';\n        button.addEventListener('click', this.saveHiScoreClick);\n        div.appendChild(button);\n        container.appendChild(div);\n        removeEventListener('click', this.hiScoreEventListenerClick, false);\n    }\n\n    private saveHiScore(e: MouseEvent) {\n        // save\n        removeEventListener('click', this.saveHiScoreClick);\n        const score = document.getElementsByTagName('input')[0];\n\n        let highScores = localStorage.getItem('highScores');\n        if (highScores) {\n            const object = JSON.parse(highScores) as HighScores;\n            object.values.push({name: score.value, score: this.state.player.score});\n            localStorage.setItem('highScores', JSON.stringify(object));\n        } else {\n            const object: HighScores = {\n                values: [{name: score.value, score: this.state.player.score}]\n            }\n            localStorage.setItem('highScores', JSON.stringify(object));\n        }\n\n        const div = document.getElementById('hi-score')!;\n        div.remove();\n        this.state.game.hiScore = false;\n    }\n\n    // private restartGame(e: MouseEvent) {\n    //     this.state.game.end = false;\n    //     this.state.game.intro = true;\n    //     this.state.game.running = true;\n    //     removeEventListener('click', this.restartGameClick);\n    //     addEventListener('keydown', this.introEventListener, false);\n    //     console.log('restartGame', this.state.game);\n    // }\n\n    private checkForHighScore() {\n        let highScores = localStorage.getItem('highScores');\n        // console.log(highScores);\n        if (highScores) {\n            const object = JSON.parse(highScores) as HighScores;\n            const hiScore = object.values.sort((a, b) => b.score - a.score);\n            this.state.game.hiScore = hiScore[0].score < this.state.player.score;\n        } else {\n            this.state.game.hiScore = true;\n        }\n        this.state.player.highScore = this.state.player.score;\n    }\n\n}\n","/******************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\n/* global Reflect, Promise, SuppressedError, Symbol, Iterator */\n\nvar extendStatics = function(d, b) {\n  extendStatics = Object.setPrototypeOf ||\n      ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n      function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n  return extendStatics(d, b);\n};\n\nexport function __extends(d, b) {\n  if (typeof b !== \"function\" && b !== null)\n      throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n  extendStatics(d, b);\n  function __() { this.constructor = d; }\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nexport var __assign = function() {\n  __assign = Object.assign || function __assign(t) {\n      for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n      return t;\n  }\n  return __assign.apply(this, arguments);\n}\n\nexport function __rest(s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n      t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n      for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n              t[p[i]] = s[p[i]];\n      }\n  return t;\n}\n\nexport function __decorate(decorators, target, key, desc) {\n  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n  else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}\n\nexport function __param(paramIndex, decorator) {\n  return function (target, key) { decorator(target, key, paramIndex); }\n}\n\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n  function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\n  var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n  var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n  var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n  var _, done = false;\n  for (var i = decorators.length - 1; i >= 0; i--) {\n      var context = {};\n      for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n      for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n      context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\n      var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\n      if (kind === \"accessor\") {\n          if (result === void 0) continue;\n          if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n          if (_ = accept(result.get)) descriptor.get = _;\n          if (_ = accept(result.set)) descriptor.set = _;\n          if (_ = accept(result.init)) initializers.unshift(_);\n      }\n      else if (_ = accept(result)) {\n          if (kind === \"field\") initializers.unshift(_);\n          else descriptor[key] = _;\n      }\n  }\n  if (target) Object.defineProperty(target, contextIn.name, descriptor);\n  done = true;\n};\n\nexport function __runInitializers(thisArg, initializers, value) {\n  var useValue = arguments.length > 2;\n  for (var i = 0; i < initializers.length; i++) {\n      value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n  }\n  return useValue ? value : void 0;\n};\n\nexport function __propKey(x) {\n  return typeof x === \"symbol\" ? x : \"\".concat(x);\n};\n\nexport function __setFunctionName(f, name, prefix) {\n  if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\n  return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\n};\n\nexport function __metadata(metadataKey, metadataValue) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\n}\n\nexport function __awaiter(thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n      function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n      function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n      function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n      step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\n\nexport function __generator(thisArg, body) {\n  var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\n  return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n  function verb(n) { return function (v) { return step([n, v]); }; }\n  function step(op) {\n      if (f) throw new TypeError(\"Generator is already executing.\");\n      while (g && (g = 0, op[0] && (_ = 0)), _) try {\n          if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n          if (y = 0, t) op = [op[0] & 2, t.value];\n          switch (op[0]) {\n              case 0: case 1: t = op; break;\n              case 4: _.label++; return { value: op[1], done: false };\n              case 5: _.label++; y = op[1]; op = [0]; continue;\n              case 7: op = _.ops.pop(); _.trys.pop(); continue;\n              default:\n                  if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                  if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                  if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                  if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                  if (t[2]) _.ops.pop();\n                  _.trys.pop(); continue;\n          }\n          op = body.call(thisArg, _);\n      } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n      if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n  }\n}\n\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n  }\n  Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nexport function __exportStar(m, o) {\n  for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\n}\n\nexport function __values(o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n      next: function () {\n          if (o && i >= o.length) o = void 0;\n          return { value: o && o[i++], done: !o };\n      }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n}\n\nexport function __read(o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o), r, ar = [], e;\n  try {\n      while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  }\n  catch (error) { e = { error: error }; }\n  finally {\n      try {\n          if (r && !r.done && (m = i[\"return\"])) m.call(i);\n      }\n      finally { if (e) throw e.error; }\n  }\n  return ar;\n}\n\n/** @deprecated */\nexport function __spread() {\n  for (var ar = [], i = 0; i < arguments.length; i++)\n      ar = ar.concat(__read(arguments[i]));\n  return ar;\n}\n\n/** @deprecated */\nexport function __spreadArrays() {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n  for (var r = Array(s), k = 0, i = 0; i < il; i++)\n      for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n          r[k] = a[j];\n  return r;\n}\n\nexport function __spreadArray(to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n      if (ar || !(i in from)) {\n          if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n          ar[i] = from[i];\n      }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n}\n\nexport function __await(v) {\n  return this instanceof __await ? (this.v = v, this) : new __await(v);\n}\n\nexport function __asyncGenerator(thisArg, _arguments, generator) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var g = generator.apply(thisArg, _arguments || []), i, q = [];\n  return i = Object.create((typeof AsyncIterator === \"function\" ? AsyncIterator : Object).prototype), verb(\"next\"), verb(\"throw\"), verb(\"return\", awaitReturn), i[Symbol.asyncIterator] = function () { return this; }, i;\n  function awaitReturn(f) { return function (v) { return Promise.resolve(v).then(f, reject); }; }\n  function verb(n, f) { if (g[n]) { i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; if (f) i[n] = f(i[n]); } }\n  function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\n  function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\n  function fulfill(value) { resume(\"next\", value); }\n  function reject(value) { resume(\"throw\", value); }\n  function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\n}\n\nexport function __asyncDelegator(o) {\n  var i, p;\n  return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\n  function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\n}\n\nexport function __asyncValues(o) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var m = o[Symbol.asyncIterator], i;\n  return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n  function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n  function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n}\n\nexport function __makeTemplateObject(cooked, raw) {\n  if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n  return cooked;\n};\n\nvar __setModuleDefault = Object.create ? (function(o, v) {\n  Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n  o[\"default\"] = v;\n};\n\nexport function __importStar(mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n}\n\nexport function __importDefault(mod) {\n  return (mod && mod.__esModule) ? mod : { default: mod };\n}\n\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n}\n\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\n  if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n}\n\nexport function __classPrivateFieldIn(state, receiver) {\n  if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\n  return typeof state === \"function\" ? receiver === state : state.has(receiver);\n}\n\nexport function __addDisposableResource(env, value, async) {\n  if (value !== null && value !== void 0) {\n    if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\n    var dispose, inner;\n    if (async) {\n      if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\n      dispose = value[Symbol.asyncDispose];\n    }\n    if (dispose === void 0) {\n      if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\n      dispose = value[Symbol.dispose];\n      if (async) inner = dispose;\n    }\n    if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\n    if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\n    env.stack.push({ value: value, dispose: dispose, async: async });\n  }\n  else if (async) {\n    env.stack.push({ async: true });\n  }\n  return value;\n}\n\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n  var e = new Error(message);\n  return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n};\n\nexport function __disposeResources(env) {\n  function fail(e) {\n    env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\n    env.hasError = true;\n  }\n  var r, s = 0;\n  function next() {\n    while (r = env.stack.pop()) {\n      try {\n        if (!r.async && s === 1) return s = 0, env.stack.push(r), Promise.resolve().then(next);\n        if (r.dispose) {\n          var result = r.dispose.call(r.value);\n          if (r.async) return s |= 2, Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\n        }\n        else s |= 1;\n      }\n      catch (e) {\n        fail(e);\n      }\n    }\n    if (s === 1) return env.hasError ? Promise.reject(env.error) : Promise.resolve();\n    if (env.hasError) throw env.error;\n  }\n  return next();\n}\n\nexport default {\n  __extends,\n  __assign,\n  __rest,\n  __decorate,\n  __param,\n  __metadata,\n  __awaiter,\n  __generator,\n  __createBinding,\n  __exportStar,\n  __values,\n  __read,\n  __spread,\n  __spreadArrays,\n  __spreadArray,\n  __await,\n  __asyncGenerator,\n  __asyncDelegator,\n  __asyncValues,\n  __makeTemplateObject,\n  __importStar,\n  __importDefault,\n  __classPrivateFieldGet,\n  __classPrivateFieldSet,\n  __classPrivateFieldIn,\n  __addDisposableResource,\n  __disposeResources,\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"/\";","__webpack_require__.b = document.baseURI || self.location.href;\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t792: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n// no on chunks loaded\n\n// no jsonp function","__webpack_require__.nc = undefined;","import './index.css';\nimport {Game} from \"./game\";\n\nif (process.env.NODE_ENV !== 'production') {\n    console.log('Looks like we are in development mode!');\n}\n\nconst game = new Game();\n"],"names":["___CSS_LOADER_URL_IMPORT_0___","URL","___CSS_LOADER_URL_IMPORT_1___","___CSS_LOADER_EXPORT___","___CSS_LOADER_URL_REPLACEMENT_0___","___CSS_LOADER_URL_REPLACEMENT_1___","push","module","id","exports","cssWithMappingToString","list","toString","this","map","item","content","needLayer","concat","length","join","i","modules","media","dedupe","supports","layer","undefined","alreadyImportedModules","k","_k","url","options","String","__esModule","default","test","slice","hash","needQuotes","replace","cssMapping","btoa","base64","unescape","encodeURIComponent","JSON","stringify","data","sourceMapping","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","locals","stylesInDOM","getIndexByIdentifier","identifier","result","modulesToDom","idCountMap","identifiers","base","count","indexByIdentifier","obj","css","sourceMap","references","updater","addElementStyle","byIndex","splice","api","update","newObj","remove","lastIdentifiers","newList","index","newLastIdentifiers","_i","_index","memo","style","target","styleTarget","document","querySelector","window","HTMLIFrameElement","contentDocument","head","e","getTarget","Error","appendChild","element","createElement","attributes","styleElement","nonce","setAttribute","apply","parentNode","removeChild","removeStyleElement","styleSheet","cssText","firstChild","createTextNode","params","name","visible","points","moveRight","moveLeft","moveDown","startTime","performance","now","exploding","explosionFrameCount","reset","setImageOne","setExplode","sx","sy","sWidth","sHeight","dWidth","dHeight","img","src","ImageComponent","AlienImgComponent","Image","resetImg","setImageTwo","AlienOneImgComponent","setImageThree","setImageFour","AlienRocketComponent","AlienPlungerShotComponent","triggerTime","Math","floor","random","setMoveDirection","AlienSaucerImgComponent","AlienSquiglyShotComponent","AlienThreeImgComponent","AlienTwoImgComponent","CanvasComponent","canvas","ctx","getContext","CeilingLineComponent","minx","miny","width","height","maxx","maxy","extent","setExtent","x","y","getTopLeft","getBottomRight","intersects","ExtentComponent","FinishLineComponent","rightPressed","leftPressed","fireRocket","PlayerComponent","PlayerRocketComponent","spawnX","dx","spawnY","dy","PositionComponent","hits","setImageFive","ShieldComponent","entities","Map","playerEntity","PlayerEntity","set","getEntities","canvasEntity","CanvasEntity","playerRockets","PlayerRocketEntities","aliens","AlienEntities","alienRockets","AlienRocketsEntities","saucer","AlienSaucerEntity","shields","ShieldEntity","finishLine","FinishLineEntity","ceilingLine","CeilingLineEntity","Entities","top","left","createAlienOne","createAlienTwo","createAlienThree","quantity","entity","EntityImpl","addComponent","Array","Date","components","component","removeComponent","delete","print","console","log","createShields","state","settings","stars","getElementById","createRings","centerX","relativeWidth","centerY","relativeHeight","strokeStyle","beginPath","arc","PI","stroke","generateStars","starsFraction","xPos","yPos","alpha","size","w","h","updateStarsPosition","forEach","star","xV","yV","magnitude","sqrt","uX","abs","uY","createVectors","xDelta","yDelta","moveTo","lineTo","min","max","BasePage","process","game","end","clearCanvas","setBackground","drawLayerOne","drawLayerTwo","clearRect","fillStyle","fillRect","value","font","fontSize","hiScore","fillText","player","score","highScores","localStorage","getItem","parse","values","sort","a","b","End","lastTick","frameCount","intro","Intro","respawn","Respawn","getSystems","systems","userInputSystem","UserInputSystem","alienRocketSystem","AlienRocketSystem","collisionSystem","CollisionSystem","gameLogicSystem","GameLogicSystem","motionSystem","MotionSystem","canvasSystem","CanvasSystem","renderSystem","RenderSystem","Systems","alienRocketEntities","get","randomAlien","get_randomAlien","alienImg","alienPos","notVisibleRockets","filter","visibleRockets","plRocket","rocket","get_random","plRocketPos","fireDelay","setRocketVisible","plRocketVisible","alien","drawScoreBoard","drawBottom","column","padding","yy","padStart","highScore","level","lives","drawImage","strokeDebug","strokeRect","ceiling","has","rocketPos","rocketExtent","rocketsAliens","rocketsSaucers","rocketsShields","rocketsRockets","rocketsCeiling","rocketsPlayer","rocketsFloor","alienExtent","aliensShields","aliensPlayer","playerExtent","alive","resetRockets","inner","shield","shieldExtent","shieldDecay","alienRocket","alienRocketExtent","ceilingExtent","finishExtent","pos","saucerStartDelay","playerClearsLevel","nextLevel","rockets","updateAlienSpeed","updateAlienMoveDirection","updateAliensPosition","updateAlienRocketPosition","updatePlayerPosition","updatePlayerRocketsPosition","updateSaucerPosition","moveDelay","maxX","maxY","minX","minY","pl","plPos","plExtent","alienFrameCount","alienRocketsFrameCount","plImg","explosionDelay","customPos","Object","create","debug","key","plRocketEntities","plRocketExtent","lastRender","tickLength","renderNext","tick","GameSettings","GameState","start","running","canvases","container","body","canvasGame","addEventListener","setAspectRatioToUse","introEventListener","introKeyDownEvent","respawnEventListener","respawnKeyDownEvent","gameEventListenerKeyDown","keyDownHandler","gameEventListenerKeyUp","keyUpHandler","hiScoreEventListenerClick","clickHighScore","saveHiScoreClick","saveHiScore","init","parentElement","aspectRatioWidth","clientWidth","aspectRatioHeight","clientHeight","aspectRatio","setTransform","save","gameLoop","time","removeEventListener","checkForHighScore","system","requestAnimationFrame","div","button","textContent","getElementsByTagName","object","setItem","Game","extendStatics","d","setPrototypeOf","__proto__","p","prototype","hasOwnProperty","call","__extends","TypeError","__","constructor","__assign","assign","t","s","n","arguments","__rest","indexOf","getOwnPropertySymbols","propertyIsEnumerable","__decorate","decorators","desc","c","r","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","__param","paramIndex","decorator","__esDecorate","ctor","descriptorIn","contextIn","initializers","extraInitializers","accept","f","_","kind","descriptor","done","context","access","addInitializer","unshift","__runInitializers","thisArg","useValue","__propKey","__setFunctionName","prefix","description","configurable","__metadata","metadataKey","metadataValue","metadata","__awaiter","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","rejected","then","__generator","label","sent","trys","ops","g","Iterator","verb","Symbol","iterator","v","op","pop","__createBinding","o","m","k2","writable","enumerable","__exportStar","__values","__read","ar","error","__spread","__spreadArrays","il","j","jl","__spreadArray","to","from","pack","l","__await","__asyncGenerator","asyncIterator","q","AsyncIterator","resume","fulfill","settle","shift","__asyncDelegator","__asyncValues","__makeTemplateObject","cooked","raw","__setModuleDefault","__importStar","mod","__importDefault","__classPrivateFieldGet","receiver","__classPrivateFieldSet","__classPrivateFieldIn","__addDisposableResource","env","async","dispose","asyncDispose","stack","_SuppressedError","SuppressedError","suppressed","message","__disposeResources","fail","hasError","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","getter","definition","prop","toStringTag","baseURI","self","location","href","nc"],"sourceRoot":""}